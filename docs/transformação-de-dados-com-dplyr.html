<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 3 Transformação de dados com dplyr | R para Data Science</title>
  <meta name="description" content="Esta página contém a solução encontrada por mim para os exercícios propostos no livro R para Data Sciente, de Hadley Wickham e Garret Grolemund, publicado no Brasil em 2019 pela Alta Books Editora." />
  <meta name="generator" content="bookdown 0.36 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 3 Transformação de dados com dplyr | R para Data Science" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://www.jeidsan.com.br/r4ds/images/cover.png" />
  <meta property="og:description" content="Esta página contém a solução encontrada por mim para os exercícios propostos no livro R para Data Sciente, de Hadley Wickham e Garret Grolemund, publicado no Brasil em 2019 pela Alta Books Editora." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 3 Transformação de dados com dplyr | R para Data Science" />
  
  <meta name="twitter:description" content="Esta página contém a solução encontrada por mim para os exercícios propostos no livro R para Data Sciente, de Hadley Wickham e Garret Grolemund, publicado no Brasil em 2019 pela Alta Books Editora." />
  <meta name="twitter:image" content="https://www.jeidsan.com.br/r4ds/images/cover.png" />

<meta name="author" content="Jeidsan A. da C. Pereira" />


<meta name="date" content="2023-11-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="fluxo-de-trabalho-o-básico.html"/>
<link rel="next" href="fluxo-de-trabalho-scripts.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 1em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://www.jeidsan.com.br/r4ds">R para Data Science: Solução dos Exercícios</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefácio</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#pendências"><i class="fa fa-check"></i>Pendências</a></li>
</ul></li>
<li class="part"><span><b>I Explorar</b></span></li>
<li class="chapter" data-level="1" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html"><i class="fa fa-check"></i><b>1</b> Visualização de dados com <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="1.1" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#introdução"><i class="fa fa-check"></i><b>1.1</b> Introdução</a></li>
<li class="chapter" data-level="1.2" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#primeiros-passos"><i class="fa fa-check"></i><b>1.2</b> Primeiros passos</a>
<ul>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-2-1"><i class="fa fa-check"></i>Exercício 1.2.1</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-2-2"><i class="fa fa-check"></i>Exercício 1.2.2</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-2-3"><i class="fa fa-check"></i>Exercício 1.2.3</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#ex1-2-4"><i class="fa fa-check"></i>Exercício 1.2.4</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-2-5"><i class="fa fa-check"></i>Exercício 1.2.5</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#mapeamentos-estéticos"><i class="fa fa-check"></i><b>1.3</b> Mapeamentos estéticos</a>
<ul>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-3-1"><i class="fa fa-check"></i>Exercício 1.3.1</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-3-2"><i class="fa fa-check"></i>Exercício 1.3.2</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-3-3"><i class="fa fa-check"></i>Exercício 1.3.3</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-3-4"><i class="fa fa-check"></i>Exercício 1.3.4</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-3-5"><i class="fa fa-check"></i>Exercício 1.3.5</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-3-6"><i class="fa fa-check"></i>Exercício 1.3.6</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#problemas-comuns"><i class="fa fa-check"></i><b>1.4</b> Problemas comuns</a></li>
<li class="chapter" data-level="1.5" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#facetas"><i class="fa fa-check"></i><b>1.5</b> Facetas</a>
<ul>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-5-1"><i class="fa fa-check"></i>Exercício 1.5.1</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-5-2"><i class="fa fa-check"></i>Exercício 1.5.2</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-5-3"><i class="fa fa-check"></i>Exercício 1.5.3</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-5-4"><i class="fa fa-check"></i>Exercício 1.5.4</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-5-5"><i class="fa fa-check"></i>Exercício 1.5.5</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-5-6"><i class="fa fa-check"></i>Exercício 1.5.6</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#objetos-geométricos"><i class="fa fa-check"></i><b>1.6</b> Objetos geométricos</a>
<ul>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-6-1"><i class="fa fa-check"></i>Exercício 1.6.1</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-6-2"><i class="fa fa-check"></i>Exercício 1.6.2</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-6-3"><i class="fa fa-check"></i>Exercício 1.6.3</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-6-4"><i class="fa fa-check"></i>Exercício 1.6.4</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-6-5"><i class="fa fa-check"></i>Exercício 1.6.5</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-6-6"><i class="fa fa-check"></i>Exercício 1.6.6</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#transformações-estatísticas"><i class="fa fa-check"></i><b>1.7</b> Transformações estatísticas</a>
<ul>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-7-1"><i class="fa fa-check"></i>Exercício 1.7.1</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-7-2"><i class="fa fa-check"></i>Exercício 1.7.2</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-7-3"><i class="fa fa-check"></i>Exercício 1.7.3</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-7-4"><i class="fa fa-check"></i>Exercício 1.7.4</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-7-5"><i class="fa fa-check"></i>Exercício 1.7.5</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#ajustes-de-posição"><i class="fa fa-check"></i><b>1.8</b> Ajustes de posição</a>
<ul>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-8-1"><i class="fa fa-check"></i>Exercício 1.8.1</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-8-2"><i class="fa fa-check"></i>Exercício 1.8.2</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-8-3"><i class="fa fa-check"></i>Exercício 1.8.3</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-8-4"><i class="fa fa-check"></i>Exercício 1.8.4</a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#sistemas-de-coordenadas"><i class="fa fa-check"></i><b>1.9</b> Sistemas de coordenadas</a>
<ul>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-9-1"><i class="fa fa-check"></i>Exercício 1.9.1</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-9-2"><i class="fa fa-check"></i>Exercício 1.9.2</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-9-3"><i class="fa fa-check"></i>Exercício 1.9.3</a></li>
<li class="chapter" data-level="" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#exr1-9-4"><i class="fa fa-check"></i>Exercício 1.9.4</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="visualização-de-dados-com-ggplot2.html"><a href="visualização-de-dados-com-ggplot2.html#a-gramática-em-camadas-de-gráficos"><i class="fa fa-check"></i><b>1.10</b> A gramática em camadas de gráficos</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="fluxo-de-trabalho-o-básico.html"><a href="fluxo-de-trabalho-o-básico.html"><i class="fa fa-check"></i><b>2</b> Fluxo de trabalho: o básico</a>
<ul>
<li class="chapter" data-level="2.1" data-path="fluxo-de-trabalho-o-básico.html"><a href="fluxo-de-trabalho-o-básico.html#o-básico-de-programação"><i class="fa fa-check"></i><b>2.1</b> O básico de programação</a></li>
<li class="chapter" data-level="2.2" data-path="fluxo-de-trabalho-o-básico.html"><a href="fluxo-de-trabalho-o-básico.html#o-que-há-em-um-nome"><i class="fa fa-check"></i><b>2.2</b> O que há em um nome?</a></li>
<li class="chapter" data-level="2.3" data-path="fluxo-de-trabalho-o-básico.html"><a href="fluxo-de-trabalho-o-básico.html#chamando-funções"><i class="fa fa-check"></i><b>2.3</b> Chamando funções</a>
<ul>
<li class="chapter" data-level="" data-path="fluxo-de-trabalho-o-básico.html"><a href="fluxo-de-trabalho-o-básico.html#exr2-3-1"><i class="fa fa-check"></i>Exercício 2.3.1</a></li>
<li class="chapter" data-level="" data-path="fluxo-de-trabalho-o-básico.html"><a href="fluxo-de-trabalho-o-básico.html#exr2-3-2"><i class="fa fa-check"></i>Exercício 2.3.2</a></li>
<li class="chapter" data-level="" data-path="fluxo-de-trabalho-o-básico.html"><a href="fluxo-de-trabalho-o-básico.html#exr2-3-3"><i class="fa fa-check"></i>Exercício 2.3.3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html"><i class="fa fa-check"></i><b>3</b> Transformação de dados com <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="3.1" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#introdução-1"><i class="fa fa-check"></i><b>3.1</b> Introdução</a></li>
<li class="chapter" data-level="3.2" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#filtrar-linhas-com-filter"><i class="fa fa-check"></i><b>3.2</b> Filtrar linhas com <code>filter()</code></a></li>
<li class="chapter" data-level="3.3" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#comparações"><i class="fa fa-check"></i><b>3.3</b> Comparações</a>
<ul>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-3-1"><i class="fa fa-check"></i>Exercício 3.3.1</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-3-2"><i class="fa fa-check"></i>Exercício 3.3.2</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-3-3"><i class="fa fa-check"></i>Exercício 3.3.3</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-3-4"><i class="fa fa-check"></i>Exercício 3.3.4</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#ordenar-linhas-com-arrange"><i class="fa fa-check"></i><b>3.4</b> Ordenar linhas com <code>arrange()</code></a>
<ul>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-4-1"><i class="fa fa-check"></i>Exercício 3.4.1</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-4-2"><i class="fa fa-check"></i>Exercício 3.4.2</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-4-3"><i class="fa fa-check"></i>Exercício 3.4.3</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-4-4"><i class="fa fa-check"></i>Exercício 3.4.4</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#selecionar-colunas-com-select"><i class="fa fa-check"></i><b>3.5</b> Selecionar colunas com <code>select()</code></a>
<ul>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-5-1"><i class="fa fa-check"></i>Exercício 3.5.1</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-5-2"><i class="fa fa-check"></i>Exercício 3.5.2</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-5-3"><i class="fa fa-check"></i>Exercício 3.5.3</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-5-4"><i class="fa fa-check"></i>Exercício 3.5.4</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#adicionar-novas-variáveis-com-mutate"><i class="fa fa-check"></i><b>3.6</b> Adicionar novas variáveis com <code>mutate()</code></a>
<ul>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-6-1"><i class="fa fa-check"></i>Exercício 3.6.1</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-6-2"><i class="fa fa-check"></i>Exercício 3.6.2</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-6-3"><i class="fa fa-check"></i>Exercício 3.6.3</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-6-4"><i class="fa fa-check"></i>Exercício 3.6.4</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-6-5"><i class="fa fa-check"></i>Exercício 3.6.5</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-6-6"><i class="fa fa-check"></i>Exercício 3.6.6</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#resumos-agrupados-com-summarize"><i class="fa fa-check"></i><b>3.7</b> Resumos agrupados com <code>summarize()</code></a>
<ul>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-7-1"><i class="fa fa-check"></i>Exercício 3.7.1</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-7-2"><i class="fa fa-check"></i>Exercício 3.7.2</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-7-3"><i class="fa fa-check"></i>Exercício 3.7.3</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-7-4"><i class="fa fa-check"></i>Exercício 3.7.4</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-7-5"><i class="fa fa-check"></i>Exercício 3.7.5</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-7-6"><i class="fa fa-check"></i>Exercício 3.7.6</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-7-7"><i class="fa fa-check"></i>Exercício 3.7.7</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#mudanças-agrupadas-e-filtros"><i class="fa fa-check"></i><b>3.8</b> Mudanças agrupadas (e filtros)</a>
<ul>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-8-1"><i class="fa fa-check"></i>Exercício 3.8.1</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-8-2"><i class="fa fa-check"></i>Exercício 3.8.2</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-8-3"><i class="fa fa-check"></i>Exercício 3.8.3</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-8-4"><i class="fa fa-check"></i>Exercício 3.8.4</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-8-5"><i class="fa fa-check"></i>Exercício 3.8.5</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-8-6"><i class="fa fa-check"></i>Exercício 3.8.6</a></li>
<li class="chapter" data-level="" data-path="transformação-de-dados-com-dplyr.html"><a href="transformação-de-dados-com-dplyr.html#exr3-8-7"><i class="fa fa-check"></i>Exercício 3.8.7</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="fluxo-de-trabalho-scripts.html"><a href="fluxo-de-trabalho-scripts.html"><i class="fa fa-check"></i><b>4</b> Fluxo de trabalho: scripts</a>
<ul>
<li class="chapter" data-level="4.1" data-path="fluxo-de-trabalho-scripts.html"><a href="fluxo-de-trabalho-scripts.html#executando-códigos"><i class="fa fa-check"></i><b>4.1</b> Executando códigos</a></li>
<li class="chapter" data-level="4.2" data-path="fluxo-de-trabalho-scripts.html"><a href="fluxo-de-trabalho-scripts.html#diagnósticos-rstudio"><i class="fa fa-check"></i><b>4.2</b> Diagnósticos Rstudio</a>
<ul>
<li class="chapter" data-level="" data-path="fluxo-de-trabalho-scripts.html"><a href="fluxo-de-trabalho-scripts.html#exr4-2-1"><i class="fa fa-check"></i>Exercício 4.2.1</a></li>
<li class="chapter" data-level="" data-path="fluxo-de-trabalho-scripts.html"><a href="fluxo-de-trabalho-scripts.html#exr4-2-2"><i class="fa fa-check"></i>Exercício 4.2.2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html"><i class="fa fa-check"></i><b>5</b> Análise exploratória de dados</a>
<ul>
<li class="chapter" data-level="5.1" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#introdução-2"><i class="fa fa-check"></i><b>5.1</b> Introdução</a></li>
<li class="chapter" data-level="5.2" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#perguntas"><i class="fa fa-check"></i><b>5.2</b> Perguntas</a></li>
<li class="chapter" data-level="5.3" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#variação"><i class="fa fa-check"></i><b>5.3</b> Variação</a>
<ul>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-3-1"><i class="fa fa-check"></i>Exercício 5.3.1</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-3-2"><i class="fa fa-check"></i>Exercício 5.3.2</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-3-3"><i class="fa fa-check"></i>Exercício 5.3.3</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-3-4"><i class="fa fa-check"></i>Exercício 5.3.4</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#valores-faltantes"><i class="fa fa-check"></i><b>5.4</b> Valores faltantes</a>
<ul>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-4-1"><i class="fa fa-check"></i>Exercício 5.4.1</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-4-2"><i class="fa fa-check"></i>Exercício 5.4.2</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#covariação"><i class="fa fa-check"></i><b>5.5</b> Covariação</a>
<ul>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-5-1"><i class="fa fa-check"></i>Exercício 5.5.1</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-5-2"><i class="fa fa-check"></i>Exercício 5.5.2</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-5-3"><i class="fa fa-check"></i>Exercício 5.5.3</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-5-4"><i class="fa fa-check"></i>Exercício 5.5.4</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-5-5"><i class="fa fa-check"></i>Exercício 5.5.5</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-5-6"><i class="fa fa-check"></i>Exercício 5.5.6</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-7-7"><i class="fa fa-check"></i>Exercício 5.5.7</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-5-8"><i class="fa fa-check"></i>Exercício 5.5.8</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-5-9"><i class="fa fa-check"></i>Exercício 5.5.9</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-5-10"><i class="fa fa-check"></i>Exercício 5.5.10</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-5-11"><i class="fa fa-check"></i>Exercício 5.5.11</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-5-12"><i class="fa fa-check"></i>Exercício 5.5.12</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-5-13"><i class="fa fa-check"></i>Exercício 5.5.13</a></li>
<li class="chapter" data-level="" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#exr5-5-14"><i class="fa fa-check"></i>Exercício 5.5.14</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#padrões-e-modelos"><i class="fa fa-check"></i><b>5.6</b> Padrões e modelos</a></li>
<li class="chapter" data-level="5.7" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#chamadas-ggplot2"><i class="fa fa-check"></i><b>5.7</b> Chamadas <code>ggplot2</code></a></li>
<li class="chapter" data-level="5.8" data-path="análise-exploratória-de-dados.html"><a href="análise-exploratória-de-dados.html#aprendendo-mais"><i class="fa fa-check"></i><b>5.8</b> Aprendendo mais</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="fluxo-de-trabalho-projetos.html"><a href="fluxo-de-trabalho-projetos.html"><i class="fa fa-check"></i><b>6</b> Fluxo de trabalho: projetos</a>
<ul>
<li class="chapter" data-level="6.1" data-path="fluxo-de-trabalho-projetos.html"><a href="fluxo-de-trabalho-projetos.html#o-que-é-real"><i class="fa fa-check"></i><b>6.1</b> O que é real?</a></li>
<li class="chapter" data-level="6.2" data-path="fluxo-de-trabalho-projetos.html"><a href="fluxo-de-trabalho-projetos.html#onde-sua-análise-vive"><i class="fa fa-check"></i><b>6.2</b> Onde sua análise vive?</a></li>
<li class="chapter" data-level="6.3" data-path="fluxo-de-trabalho-projetos.html"><a href="fluxo-de-trabalho-projetos.html#caminhos-e-diretórios"><i class="fa fa-check"></i><b>6.3</b> Caminhos e diretórios</a></li>
<li class="chapter" data-level="6.4" data-path="fluxo-de-trabalho-projetos.html"><a href="fluxo-de-trabalho-projetos.html#projetos-rstudio"><i class="fa fa-check"></i><b>6.4</b> Projetos RStudio</a></li>
<li class="chapter" data-level="6.5" data-path="fluxo-de-trabalho-projetos.html"><a href="fluxo-de-trabalho-projetos.html#resumo"><i class="fa fa-check"></i><b>6.5</b> Resumo</a></li>
</ul></li>
<li class="part"><span><b>II Wrangle</b></span></li>
<li class="chapter" data-level="7" data-path="tibbles-com-tibble.html"><a href="tibbles-com-tibble.html"><i class="fa fa-check"></i><b>7</b> Tibbles com <code>tibble</code></a>
<ul>
<li class="chapter" data-level="7.1" data-path="tibbles-com-tibble.html"><a href="tibbles-com-tibble.html#introdução-3"><i class="fa fa-check"></i><b>7.1</b> Introdução</a></li>
<li class="chapter" data-level="7.2" data-path="tibbles-com-tibble.html"><a href="tibbles-com-tibble.html#criando-tibbles"><i class="fa fa-check"></i><b>7.2</b> Criando tibbles</a></li>
<li class="chapter" data-level="7.3" data-path="tibbles-com-tibble.html"><a href="tibbles-com-tibble.html#tibbles-versus-data.frame"><i class="fa fa-check"></i><b>7.3</b> Tibbles <em>versus</em> <code>data.frame</code></a></li>
<li class="chapter" data-level="7.4" data-path="tibbles-com-tibble.html"><a href="tibbles-com-tibble.html#interagindo-com-códigos-mais-antigos"><i class="fa fa-check"></i><b>7.4</b> Interagindo com códigos mais antigos</a>
<ul>
<li class="chapter" data-level="" data-path="tibbles-com-tibble.html"><a href="tibbles-com-tibble.html#exr7-4-1"><i class="fa fa-check"></i>Exercício 7.4.1</a></li>
<li class="chapter" data-level="" data-path="tibbles-com-tibble.html"><a href="tibbles-com-tibble.html#exr7-4-2"><i class="fa fa-check"></i>Exercício 7.4.2</a></li>
<li class="chapter" data-level="" data-path="tibbles-com-tibble.html"><a href="tibbles-com-tibble.html#exr7-4-3"><i class="fa fa-check"></i>Exercício 7.4.3</a></li>
<li class="chapter" data-level="" data-path="tibbles-com-tibble.html"><a href="tibbles-com-tibble.html#exr7-4-4"><i class="fa fa-check"></i>Exercício 7.4.4</a></li>
<li class="chapter" data-level="" data-path="tibbles-com-tibble.html"><a href="tibbles-com-tibble.html#exr7-4-5"><i class="fa fa-check"></i>Exercício 7.4.5</a></li>
<li class="chapter" data-level="" data-path="tibbles-com-tibble.html"><a href="tibbles-com-tibble.html#exr7-4-6"><i class="fa fa-check"></i>Exercício 7.4.6</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html"><i class="fa fa-check"></i><b>8</b> Importando dados com <code>readr</code></a>
<ul>
<li class="chapter" data-level="8.1" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#introdução-4"><i class="fa fa-check"></i><b>8.1</b> Introdução</a></li>
<li class="chapter" data-level="8.2" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#começando"><i class="fa fa-check"></i><b>8.2</b> Começando</a>
<ul>
<li class="chapter" data-level="" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#exr8-2-1"><i class="fa fa-check"></i>Exercício 8.2.1</a></li>
<li class="chapter" data-level="" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#exr8-2-2"><i class="fa fa-check"></i>Exercício 8.2.2</a></li>
<li class="chapter" data-level="" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#exr8-2-3"><i class="fa fa-check"></i>Exercício 8.2.3</a></li>
<li class="chapter" data-level="" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#exr8-2-4"><i class="fa fa-check"></i>Exercício 8.2.4</a></li>
<li class="chapter" data-level="" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#exr8-2-5"><i class="fa fa-check"></i>Exercício 8.2.5</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#analisando-um-vetor"><i class="fa fa-check"></i><b>8.3</b> Analisando um vetor</a>
<ul>
<li class="chapter" data-level="" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#exr8-3-1"><i class="fa fa-check"></i>Exercício 8.3.1</a></li>
<li class="chapter" data-level="" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#exr8-3-2"><i class="fa fa-check"></i>Exercício 8.3.2</a></li>
<li class="chapter" data-level="" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#exr8-3-3"><i class="fa fa-check"></i>Exercício 8.3.3</a></li>
<li class="chapter" data-level="" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#exr8-3-4"><i class="fa fa-check"></i>Exercício 8.3.4</a></li>
<li class="chapter" data-level="" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#exr8-3-5"><i class="fa fa-check"></i>Exercício 8.3.5</a></li>
<li class="chapter" data-level="" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#exr8-3-6"><i class="fa fa-check"></i>Exercício 8.3.6</a></li>
<li class="chapter" data-level="" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#exr8-3-7"><i class="fa fa-check"></i>Exercício 8.3.7</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#analisando-um-arquivo"><i class="fa fa-check"></i><b>8.4</b> Analisando um arquivo</a></li>
<li class="chapter" data-level="8.5" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#escrevendo-em-um-arquivo"><i class="fa fa-check"></i><b>8.5</b> Escrevendo em um arquivo</a></li>
<li class="chapter" data-level="8.6" data-path="importando-dados-com-readr.html"><a href="importando-dados-com-readr.html#outros-tipos-de-dados"><i class="fa fa-check"></i><b>8.6</b> Outros tipos de dados</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="arrumando-dados-com-tidyr.html"><a href="arrumando-dados-com-tidyr.html"><i class="fa fa-check"></i><b>9</b> Arrumando dados com <code>tidyr</code></a>
<ul>
<li class="chapter" data-level="9.1" data-path="arrumando-dados-com-tidyr.html"><a href="arrumando-dados-com-tidyr.html#introdução-5"><i class="fa fa-check"></i><b>9.1</b> Introdução</a></li>
<li class="chapter" data-level="9.2" data-path="arrumando-dados-com-tidyr.html"><a href="arrumando-dados-com-tidyr.html#dados-arrumados-tidy-data"><i class="fa fa-check"></i><b>9.2</b> Dados arrumados (Tidy Data)</a></li>
<li class="chapter" data-level="9.3" data-path="arrumando-dados-com-tidyr.html"><a href="arrumando-dados-com-tidyr.html#espalhando-e-reunindo"><i class="fa fa-check"></i><b>9.3</b> Espalhando e reunindo</a></li>
<li class="chapter" data-level="9.4" data-path="arrumando-dados-com-tidyr.html"><a href="arrumando-dados-com-tidyr.html#separando-e-unindo"><i class="fa fa-check"></i><b>9.4</b> Separando e unindo</a></li>
<li class="chapter" data-level="9.5" data-path="arrumando-dados-com-tidyr.html"><a href="arrumando-dados-com-tidyr.html#valores-faltantes-1"><i class="fa fa-check"></i><b>9.5</b> Valores faltantes</a></li>
<li class="chapter" data-level="9.6" data-path="arrumando-dados-com-tidyr.html"><a href="arrumando-dados-com-tidyr.html#estudo-de-caso"><i class="fa fa-check"></i><b>9.6</b> Estudo de caso</a></li>
<li class="chapter" data-level="9.7" data-path="arrumando-dados-com-tidyr.html"><a href="arrumando-dados-com-tidyr.html#dados-desarrumados-não-tidy"><i class="fa fa-check"></i><b>9.7</b> Dados desarrumados (não tidy)</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="dados-relacionais-com-dplyr.html"><a href="dados-relacionais-com-dplyr.html"><i class="fa fa-check"></i><b>10</b> Dados relacionais com <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="10.1" data-path="dados-relacionais-com-dplyr.html"><a href="dados-relacionais-com-dplyr.html#introdução-6"><i class="fa fa-check"></i><b>10.1</b> Introdução</a></li>
<li class="chapter" data-level="10.2" data-path="dados-relacionais-com-dplyr.html"><a href="dados-relacionais-com-dplyr.html#nycflights13"><i class="fa fa-check"></i><b>10.2</b> <code>nycflights13</code></a></li>
<li class="chapter" data-level="10.3" data-path="dados-relacionais-com-dplyr.html"><a href="dados-relacionais-com-dplyr.html#chaves-keys"><i class="fa fa-check"></i><b>10.3</b> Chaves (keys)</a></li>
<li class="chapter" data-level="10.4" data-path="dados-relacionais-com-dplyr.html"><a href="dados-relacionais-com-dplyr.html#mutating-joins"><i class="fa fa-check"></i><b>10.4</b> Mutating joins</a></li>
<li class="chapter" data-level="10.5" data-path="dados-relacionais-com-dplyr.html"><a href="dados-relacionais-com-dplyr.html#filtering-joins"><i class="fa fa-check"></i><b>10.5</b> Filtering joins</a></li>
<li class="chapter" data-level="10.6" data-path="dados-relacionais-com-dplyr.html"><a href="dados-relacionais-com-dplyr.html#problemas-de-joins"><i class="fa fa-check"></i><b>10.6</b> Problemas de joins</a></li>
<li class="chapter" data-level="10.7" data-path="dados-relacionais-com-dplyr.html"><a href="dados-relacionais-com-dplyr.html#operações-de-conjuntos"><i class="fa fa-check"></i><b>10.7</b> Operações de conjuntos</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="strings-com-stringr.html"><a href="strings-com-stringr.html"><i class="fa fa-check"></i><b>11</b> Strings com <code>stringr</code></a>
<ul>
<li class="chapter" data-level="11.1" data-path="strings-com-stringr.html"><a href="strings-com-stringr.html#introdução-7"><i class="fa fa-check"></i><b>11.1</b> Introdução</a></li>
<li class="chapter" data-level="11.2" data-path="strings-com-stringr.html"><a href="strings-com-stringr.html#o-básico-de-string"><i class="fa fa-check"></i><b>11.2</b> O básico de string</a></li>
<li class="chapter" data-level="11.3" data-path="strings-com-stringr.html"><a href="strings-com-stringr.html#combinando-padrões-com-expressões-regulares"><i class="fa fa-check"></i><b>11.3</b> Combinando padrões com expressões regulares</a></li>
<li class="chapter" data-level="11.4" data-path="strings-com-stringr.html"><a href="strings-com-stringr.html#ferramentas"><i class="fa fa-check"></i><b>11.4</b> Ferramentas</a></li>
<li class="chapter" data-level="11.5" data-path="strings-com-stringr.html"><a href="strings-com-stringr.html#outros-tipos-de-padrões"><i class="fa fa-check"></i><b>11.5</b> Outros tipos de padrões</a></li>
<li class="chapter" data-level="11.6" data-path="strings-com-stringr.html"><a href="strings-com-stringr.html#outros-usos-para-expressões-regulares"><i class="fa fa-check"></i><b>11.6</b> Outros usos para expressões regulares</a></li>
<li class="chapter" data-level="11.7" data-path="strings-com-stringr.html"><a href="strings-com-stringr.html#string"><i class="fa fa-check"></i><b>11.7</b> <code>string</code></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="fatores-com-forcats.html"><a href="fatores-com-forcats.html"><i class="fa fa-check"></i><b>12</b> Fatores com <code>forcats</code></a>
<ul>
<li class="chapter" data-level="12.1" data-path="fatores-com-forcats.html"><a href="fatores-com-forcats.html#introdução-8"><i class="fa fa-check"></i><b>12.1</b> Introdução</a></li>
<li class="chapter" data-level="12.2" data-path="fatores-com-forcats.html"><a href="fatores-com-forcats.html#criando-fatores"><i class="fa fa-check"></i><b>12.2</b> Criando fatores</a></li>
<li class="chapter" data-level="12.3" data-path="fatores-com-forcats.html"><a href="fatores-com-forcats.html#general-social-survey"><i class="fa fa-check"></i><b>12.3</b> General Social Survey</a></li>
<li class="chapter" data-level="12.4" data-path="fatores-com-forcats.html"><a href="fatores-com-forcats.html#modificando-a-ordem-dos-fatores"><i class="fa fa-check"></i><b>12.4</b> Modificando a ordem dos fatores</a></li>
<li class="chapter" data-level="12.5" data-path="fatores-com-forcats.html"><a href="fatores-com-forcats.html#modificando-níveis-de-fatores"><i class="fa fa-check"></i><b>12.5</b> Modificando níveis de fatores</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="datas-e-horas-com-lubridate.html"><a href="datas-e-horas-com-lubridate.html"><i class="fa fa-check"></i><b>13</b> Datas e horas com <code>lubridate</code></a>
<ul>
<li class="chapter" data-level="13.1" data-path="datas-e-horas-com-lubridate.html"><a href="datas-e-horas-com-lubridate.html#introdução-9"><i class="fa fa-check"></i><b>13.1</b> Introdução</a></li>
<li class="chapter" data-level="13.2" data-path="datas-e-horas-com-lubridate.html"><a href="datas-e-horas-com-lubridate.html#criando-datahoras"><i class="fa fa-check"></i><b>13.2</b> Criando data/horas</a></li>
<li class="chapter" data-level="13.3" data-path="datas-e-horas-com-lubridate.html"><a href="datas-e-horas-com-lubridate.html#componentes-de-data-hora"><i class="fa fa-check"></i><b>13.3</b> Componentes de data-hora</a></li>
<li class="chapter" data-level="13.4" data-path="datas-e-horas-com-lubridate.html"><a href="datas-e-horas-com-lubridate.html#intervalos-de-tempo"><i class="fa fa-check"></i><b>13.4</b> Intervalos de tempo</a></li>
<li class="chapter" data-level="13.5" data-path="datas-e-horas-com-lubridate.html"><a href="datas-e-horas-com-lubridate.html#fusos-horários"><i class="fa fa-check"></i><b>13.5</b> Fusos horários</a></li>
</ul></li>
<li class="part"><span><b>III Programar</b></span></li>
<li class="chapter" data-level="14" data-path="pipes-com-magrittr.html"><a href="pipes-com-magrittr.html"><i class="fa fa-check"></i><b>14</b> Pipes com <code>magrittr</code></a>
<ul>
<li class="chapter" data-level="14.1" data-path="pipes-com-magrittr.html"><a href="pipes-com-magrittr.html#introdução-10"><i class="fa fa-check"></i><b>14.1</b> Introdução</a></li>
<li class="chapter" data-level="14.2" data-path="pipes-com-magrittr.html"><a href="pipes-com-magrittr.html#alternativas-ao-piping"><i class="fa fa-check"></i><b>14.2</b> Alternativas ao piping</a></li>
<li class="chapter" data-level="14.3" data-path="pipes-com-magrittr.html"><a href="pipes-com-magrittr.html#quando-não-usar-o-pipe"><i class="fa fa-check"></i><b>14.3</b> Quando não usar o pipe</a></li>
<li class="chapter" data-level="14.4" data-path="pipes-com-magrittr.html"><a href="pipes-com-magrittr.html#outras-ferramentas-do-magrittr"><i class="fa fa-check"></i><b>14.4</b> Outras ferramentas do <code>magrittr</code></a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="funções.html"><a href="funções.html"><i class="fa fa-check"></i><b>15</b> Funções</a>
<ul>
<li class="chapter" data-level="15.1" data-path="funções.html"><a href="funções.html#introdução-11"><i class="fa fa-check"></i><b>15.1</b> Introdução</a></li>
<li class="chapter" data-level="15.2" data-path="funções.html"><a href="funções.html#quando-você-deveria-escrever-uma-função"><i class="fa fa-check"></i><b>15.2</b> Quando você deveria escrever uma função?</a></li>
<li class="chapter" data-level="15.3" data-path="funções.html"><a href="funções.html#funções-são-para-humanos-e-computadores"><i class="fa fa-check"></i><b>15.3</b> Funções são para humanos e computadores</a></li>
<li class="chapter" data-level="15.4" data-path="funções.html"><a href="funções.html#execução-condicional"><i class="fa fa-check"></i><b>15.4</b> Execução condicional</a></li>
<li class="chapter" data-level="15.5" data-path="funções.html"><a href="funções.html#argumentos-de-funções"><i class="fa fa-check"></i><b>15.5</b> Argumentos de funções</a></li>
<li class="chapter" data-level="15.6" data-path="funções.html"><a href="funções.html#retorno-de-valores"><i class="fa fa-check"></i><b>15.6</b> Retorno de valores</a></li>
<li class="chapter" data-level="15.7" data-path="funções.html"><a href="funções.html#ambiente"><i class="fa fa-check"></i><b>15.7</b> Ambiente</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="vetores.html"><a href="vetores.html"><i class="fa fa-check"></i><b>16</b> Vetores</a>
<ul>
<li class="chapter" data-level="16.1" data-path="vetores.html"><a href="vetores.html#introdução-12"><i class="fa fa-check"></i><b>16.1</b> Introdução</a></li>
<li class="chapter" data-level="16.2" data-path="vetores.html"><a href="vetores.html#o-básico-de-vetores"><i class="fa fa-check"></i><b>16.2</b> O Básico de vetores</a></li>
<li class="chapter" data-level="16.3" data-path="vetores.html"><a href="vetores.html#tipos-importantes-de-vetores-atômicos"><i class="fa fa-check"></i><b>16.3</b> Tipos importantes de vetores atômicos</a></li>
<li class="chapter" data-level="16.4" data-path="vetores.html"><a href="vetores.html#usando-vetores-atómicos"><i class="fa fa-check"></i><b>16.4</b> Usando vetores atómicos</a></li>
<li class="chapter" data-level="16.5" data-path="vetores.html"><a href="vetores.html#vetores-recursivos-listas"><i class="fa fa-check"></i><b>16.5</b> Vetores recursivos (listas)</a></li>
<li class="chapter" data-level="16.6" data-path="vetores.html"><a href="vetores.html#atributos"><i class="fa fa-check"></i><b>16.6</b> Atributos</a></li>
<li class="chapter" data-level="16.7" data-path="vetores.html"><a href="vetores.html#vetores-aumentados"><i class="fa fa-check"></i><b>16.7</b> Vetores aumentados</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="iteração-com-purrr.html"><a href="iteração-com-purrr.html"><i class="fa fa-check"></i><b>17</b> Iteração com <code>purrr</code></a>
<ul>
<li class="chapter" data-level="17.1" data-path="iteração-com-purrr.html"><a href="iteração-com-purrr.html#introdução-13"><i class="fa fa-check"></i><b>17.1</b> Introdução</a></li>
<li class="chapter" data-level="17.2" data-path="iteração-com-purrr.html"><a href="iteração-com-purrr.html#loops-for"><i class="fa fa-check"></i><b>17.2</b> Loops <code>for</code></a></li>
<li class="chapter" data-level="17.3" data-path="iteração-com-purrr.html"><a href="iteração-com-purrr.html#variações-do-loop-for"><i class="fa fa-check"></i><b>17.3</b> Variações do loop <code>for</code></a></li>
<li class="chapter" data-level="17.4" data-path="iteração-com-purrr.html"><a href="iteração-com-purrr.html#loops-for-versus-funcionais"><i class="fa fa-check"></i><b>17.4</b> Loops <code>for</code> <em>versus</em> funcionais</a></li>
<li class="chapter" data-level="17.5" data-path="iteração-com-purrr.html"><a href="iteração-com-purrr.html#as-funções-map"><i class="fa fa-check"></i><b>17.5</b> As funções <code>map</code></a></li>
<li class="chapter" data-level="17.6" data-path="iteração-com-purrr.html"><a href="iteração-com-purrr.html#lidando-com-falhas"><i class="fa fa-check"></i><b>17.6</b> Lidando com falhas</a></li>
<li class="chapter" data-level="17.7" data-path="iteração-com-purrr.html"><a href="iteração-com-purrr.html#fazendo-map-com-vários-argumentos"><i class="fa fa-check"></i><b>17.7</b> Fazendo <code>map</code> com vários argumentos</a></li>
<li class="chapter" data-level="17.8" data-path="iteração-com-purrr.html"><a href="iteração-com-purrr.html#walk"><i class="fa fa-check"></i><b>17.8</b> Walk</a></li>
<li class="chapter" data-level="17.9" data-path="iteração-com-purrr.html"><a href="iteração-com-purrr.html#outros-padrões-para-loops-for"><i class="fa fa-check"></i><b>17.9</b> Outros padrões para loops <code>for</code></a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="part-modelar.html"><a href="part-modelar.html"><i class="fa fa-check"></i><b>18</b> (PART) Modelar</a></li>
<li class="chapter" data-level="19" data-path="o-básico-de-modelos-com-modelr.html"><a href="o-básico-de-modelos-com-modelr.html"><i class="fa fa-check"></i><b>19</b> O básico de modelos com <code>modelr</code></a>
<ul>
<li class="chapter" data-level="19.1" data-path="o-básico-de-modelos-com-modelr.html"><a href="o-básico-de-modelos-com-modelr.html#introdução-14"><i class="fa fa-check"></i><b>19.1</b> Introdução</a></li>
<li class="chapter" data-level="19.2" data-path="o-básico-de-modelos-com-modelr.html"><a href="o-básico-de-modelos-com-modelr.html#um-modelo-simples"><i class="fa fa-check"></i><b>19.2</b> Um modelo simples</a></li>
<li class="chapter" data-level="19.3" data-path="o-básico-de-modelos-com-modelr.html"><a href="o-básico-de-modelos-com-modelr.html#visualizando-modelos-fórmulas-e-famílias-de-modelos"><i class="fa fa-check"></i><b>19.3</b> Visualizando modelos fórmulas e famílias de modelos</a></li>
<li class="chapter" data-level="19.4" data-path="o-básico-de-modelos-com-modelr.html"><a href="o-básico-de-modelos-com-modelr.html#valores-faltantes-2"><i class="fa fa-check"></i><b>19.4</b> Valores faltantes</a></li>
<li class="chapter" data-level="19.5" data-path="o-básico-de-modelos-com-modelr.html"><a href="o-básico-de-modelos-com-modelr.html#outras-famílias-de-modelos"><i class="fa fa-check"></i><b>19.5</b> Outras famílias de modelos</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="construção-de-modelos.html"><a href="construção-de-modelos.html"><i class="fa fa-check"></i><b>20</b> Construção de modelos</a>
<ul>
<li class="chapter" data-level="20.1" data-path="construção-de-modelos.html"><a href="construção-de-modelos.html#introdução-15"><i class="fa fa-check"></i><b>20.1</b> Introdução</a></li>
<li class="chapter" data-level="20.2" data-path="construção-de-modelos.html"><a href="construção-de-modelos.html#por-que-diamantes-de-baixa-qualidade-são-mais-caros"><i class="fa fa-check"></i><b>20.2</b> Por que diamantes de baixa qualidade são mais caros?</a></li>
<li class="chapter" data-level="20.3" data-path="construção-de-modelos.html"><a href="construção-de-modelos.html#o-que-afeta-o-número-de-voos-diários"><i class="fa fa-check"></i><b>20.3</b> O que afeta o número de voos diários?</a></li>
<li class="chapter" data-level="20.4" data-path="construção-de-modelos.html"><a href="construção-de-modelos.html#aprendendo-mais-sobre-modelos"><i class="fa fa-check"></i><b>20.4</b> Aprendendo mais sobre modelos</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="muitos-modelos-com-purrr-e-broom.html"><a href="muitos-modelos-com-purrr-e-broom.html"><i class="fa fa-check"></i><b>21</b> Muitos modelos com <code>purrr</code> e <code>broom</code></a>
<ul>
<li class="chapter" data-level="21.1" data-path="muitos-modelos-com-purrr-e-broom.html"><a href="muitos-modelos-com-purrr-e-broom.html#introdução-16"><i class="fa fa-check"></i><b>21.1</b> Introdução</a></li>
<li class="chapter" data-level="21.2" data-path="muitos-modelos-com-purrr-e-broom.html"><a href="muitos-modelos-com-purrr-e-broom.html#gapminder"><i class="fa fa-check"></i><b>21.2</b> <code>gapminder</code></a></li>
<li class="chapter" data-level="21.3" data-path="muitos-modelos-com-purrr-e-broom.html"><a href="muitos-modelos-com-purrr-e-broom.html#list-columns"><i class="fa fa-check"></i><b>21.3</b> List-columns</a></li>
<li class="chapter" data-level="21.4" data-path="muitos-modelos-com-purrr-e-broom.html"><a href="muitos-modelos-com-purrr-e-broom.html#criando-list-columns"><i class="fa fa-check"></i><b>21.4</b> Criando list-columns</a></li>
<li class="chapter" data-level="21.5" data-path="muitos-modelos-com-purrr-e-broom.html"><a href="muitos-modelos-com-purrr-e-broom.html#simplificando-list-columns"><i class="fa fa-check"></i><b>21.5</b> Simplificando list-columns</a></li>
<li class="chapter" data-level="21.6" data-path="muitos-modelos-com-purrr-e-broom.html"><a href="muitos-modelos-com-purrr-e-broom.html#criando-dados-tidy-com-broom"><i class="fa fa-check"></i><b>21.6</b> Criando dados tidy com <code>broom</code></a></li>
</ul></li>
<li class="part"><span><b>IV Comunicar</b></span></li>
<li class="chapter" data-level="22" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>22</b> R Markdown</a>
<ul>
<li class="chapter" data-level="22.1" data-path="r-markdown.html"><a href="r-markdown.html#introdução-17"><i class="fa fa-check"></i><b>22.1</b> Introdução</a></li>
<li class="chapter" data-level="22.2" data-path="r-markdown.html"><a href="r-markdown.html#o-básico-de-r-markdown"><i class="fa fa-check"></i><b>22.2</b> O Básico de R Markdown</a></li>
<li class="chapter" data-level="22.3" data-path="r-markdown.html"><a href="r-markdown.html#formatação-de-texto-com-markdown"><i class="fa fa-check"></i><b>22.3</b> Formatação de texto com markdown</a></li>
<li class="chapter" data-level="22.4" data-path="r-markdown.html"><a href="r-markdown.html#trechos-de-código"><i class="fa fa-check"></i><b>22.4</b> Trechos de código</a></li>
<li class="chapter" data-level="22.5" data-path="r-markdown.html"><a href="r-markdown.html#resolução-de-problemas"><i class="fa fa-check"></i><b>22.5</b> Resolução de problemas</a></li>
<li class="chapter" data-level="22.6" data-path="r-markdown.html"><a href="r-markdown.html#header-yaml"><i class="fa fa-check"></i><b>22.6</b> Header YAML</a></li>
<li class="chapter" data-level="22.7" data-path="r-markdown.html"><a href="r-markdown.html#aprendendo-mais-1"><i class="fa fa-check"></i><b>22.7</b> Aprendendo mais</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="gráficos-para-comunicação-com-ggplot2.html"><a href="gráficos-para-comunicação-com-ggplot2.html"><i class="fa fa-check"></i><b>23</b> Gráficos para comunicação com <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="23.1" data-path="gráficos-para-comunicação-com-ggplot2.html"><a href="gráficos-para-comunicação-com-ggplot2.html#introdução-18"><i class="fa fa-check"></i><b>23.1</b> Introdução</a></li>
<li class="chapter" data-level="23.2" data-path="gráficos-para-comunicação-com-ggplot2.html"><a href="gráficos-para-comunicação-com-ggplot2.html#rótulo"><i class="fa fa-check"></i><b>23.2</b> Rótulo</a></li>
<li class="chapter" data-level="23.3" data-path="gráficos-para-comunicação-com-ggplot2.html"><a href="gráficos-para-comunicação-com-ggplot2.html#anotações"><i class="fa fa-check"></i><b>23.3</b> Anotações</a></li>
<li class="chapter" data-level="23.4" data-path="gráficos-para-comunicação-com-ggplot2.html"><a href="gráficos-para-comunicação-com-ggplot2.html#escalas"><i class="fa fa-check"></i><b>23.4</b> Escalas</a></li>
<li class="chapter" data-level="23.5" data-path="gráficos-para-comunicação-com-ggplot2.html"><a href="gráficos-para-comunicação-com-ggplot2.html#dando-zoom"><i class="fa fa-check"></i><b>23.5</b> Dando zoom</a></li>
<li class="chapter" data-level="23.6" data-path="gráficos-para-comunicação-com-ggplot2.html"><a href="gráficos-para-comunicação-com-ggplot2.html#temas"><i class="fa fa-check"></i><b>23.6</b> Temas</a></li>
<li class="chapter" data-level="23.7" data-path="gráficos-para-comunicação-com-ggplot2.html"><a href="gráficos-para-comunicação-com-ggplot2.html#salvando-seus-gráficos"><i class="fa fa-check"></i><b>23.7</b> Salvando seus gráficos</a></li>
<li class="chapter" data-level="23.8" data-path="gráficos-para-comunicação-com-ggplot2.html"><a href="gráficos-para-comunicação-com-ggplot2.html#aprendendo-mais-2"><i class="fa fa-check"></i><b>23.8</b> Aprendendo mais</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="formatos-r-markdown.html"><a href="formatos-r-markdown.html"><i class="fa fa-check"></i><b>24</b> Formatos R Markdown</a>
<ul>
<li class="chapter" data-level="24.1" data-path="formatos-r-markdown.html"><a href="formatos-r-markdown.html#introdução-19"><i class="fa fa-check"></i><b>24.1</b> Introdução</a></li>
<li class="chapter" data-level="24.2" data-path="formatos-r-markdown.html"><a href="formatos-r-markdown.html#opções-de-saída"><i class="fa fa-check"></i><b>24.2</b> Opções de saída</a></li>
<li class="chapter" data-level="24.3" data-path="formatos-r-markdown.html"><a href="formatos-r-markdown.html#documentos"><i class="fa fa-check"></i><b>24.3</b> Documentos</a></li>
<li class="chapter" data-level="24.4" data-path="formatos-r-markdown.html"><a href="formatos-r-markdown.html#notebooks"><i class="fa fa-check"></i><b>24.4</b> Notebooks</a></li>
<li class="chapter" data-level="24.5" data-path="formatos-r-markdown.html"><a href="formatos-r-markdown.html#apresentações"><i class="fa fa-check"></i><b>24.5</b> Apresentações</a></li>
<li class="chapter" data-level="24.6" data-path="formatos-r-markdown.html"><a href="formatos-r-markdown.html#dashboards"><i class="fa fa-check"></i><b>24.6</b> Dashboards</a></li>
<li class="chapter" data-level="24.7" data-path="formatos-r-markdown.html"><a href="formatos-r-markdown.html#interatividade"><i class="fa fa-check"></i><b>24.7</b> Interatividade</a></li>
<li class="chapter" data-level="24.8" data-path="formatos-r-markdown.html"><a href="formatos-r-markdown.html#sites"><i class="fa fa-check"></i><b>24.8</b> Sites</a></li>
<li class="chapter" data-level="24.9" data-path="formatos-r-markdown.html"><a href="formatos-r-markdown.html#outros-formatos"><i class="fa fa-check"></i><b>24.9</b> Outros formatos</a></li>
<li class="chapter" data-level="24.10" data-path="formatos-r-markdown.html"><a href="formatos-r-markdown.html#aprendendo-mais-3"><i class="fa fa-check"></i><b>24.10</b> Aprendendo mais</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="fluxo-de-trabalho-de-r-markdown.html"><a href="fluxo-de-trabalho-de-r-markdown.html"><i class="fa fa-check"></i><b>25</b> Fluxo de trabalho de R Markdown</a></li>
<li class="chapter" data-level="" data-path="referências.html"><a href="referências.html"><i class="fa fa-check"></i>Referências</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado com bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R para Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="transformação-de-dados-com-dplyr" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Capítulo 3</span> Transformação de dados com <code>dplyr</code><a href="transformação-de-dados-com-dplyr.html#transformação-de-dados-com-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Para este capítulo, necessitaremos das seguintes configurações iniciais:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="transformação-de-dados-com-dplyr.html#cb62-1" tabindex="-1"></a>not_cancelled <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span></span>
<span id="cb62-2"><a href="transformação-de-dados-com-dplyr.html#cb62-2" tabindex="-1"></a>                    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_delay), <span class="sc">!</span><span class="fu">is.na</span>(arr_delay))</span></code></pre></div>
<div id="introdução-1" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Introdução<a href="transformação-de-dados-com-dplyr.html#introdução-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Não temos exercícios nesta seção.</p>
</div>
<div id="filtrar-linhas-com-filter" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Filtrar linhas com <code>filter()</code><a href="transformação-de-dados-com-dplyr.html#filtrar-linhas-com-filter" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Não temos exercícios nesta seção.</p>
</div>
<div id="comparações" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Comparações<a href="transformação-de-dados-com-dplyr.html#comparações" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="exr3-3-1" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.3.1<a href="transformação-de-dados-com-dplyr.html#exr3-3-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Encontre todos os voos que:</p>
<ol style="list-style-type: lower-alpha">
<li>Tiveram um atraso de duas horas ou mais na chegada.</li>
<li>Foram para Houston (IAH ou HOU).</li>
<li>Foram operados pela United, American ou Delta.</li>
<li>Partiram em julho, agosto e setembro.</li>
<li>Chegaram com mais de duas horas de atraso, mas não saíram atrasados.</li>
<li>Atrasaram pelo menos uma hora, mas compensaram mais de 30 minutos durante o trajeto.</li>
<li>Saíram entre meia-noite e 6h (incluindo esses horários).</li>
</ol>
</div>
<div class="solution">
<p><span id="unlabeled-div-40" class="solution"><em>Solução</em>. </span></p>
<ol style="list-style-type: lower-alpha">
<li>Tiveram um atraso de duas horas ou mais na chegada.</li>
</ol>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="transformação-de-dados-com-dplyr.html#cb63-1" tabindex="-1"></a><span class="fu">filter</span>(flights, arr_delay <span class="sc">&gt;=</span> <span class="dv">120</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10,200 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      811            630       101     1047            830
##  2  2013     1     1      848           1835       853     1001           1950
##  3  2013     1     1      957            733       144     1056            853
##  4  2013     1     1     1114            900       134     1447           1222
##  5  2013     1     1     1505           1310       115     1638           1431
##  6  2013     1     1     1525           1340       105     1831           1626
##  7  2013     1     1     1549           1445        64     1912           1656
##  8  2013     1     1     1558           1359       119     1718           1515
##  9  2013     1     1     1732           1630        62     2028           1825
## 10  2013     1     1     1803           1620       103     2008           1750
## # ℹ 10,190 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<ol start="2" style="list-style-type: lower-alpha">
<li>Foram para Houston (IAH ou HOU).</li>
</ol>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="transformação-de-dados-com-dplyr.html#cb65-1" tabindex="-1"></a><span class="fu">filter</span>(flights, dest <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;IAH&quot;</span>, <span class="st">&quot;HOU&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 9,313 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      623            627        -4      933            932
##  4  2013     1     1      728            732        -4     1041           1038
##  5  2013     1     1      739            739         0     1104           1038
##  6  2013     1     1      908            908         0     1228           1219
##  7  2013     1     1     1028           1026         2     1350           1339
##  8  2013     1     1     1044           1045        -1     1352           1351
##  9  2013     1     1     1114            900       134     1447           1222
## 10  2013     1     1     1205           1200         5     1503           1505
## # ℹ 9,303 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<ol start="3" style="list-style-type: lower-alpha">
<li>Foram operados pela United, American ou Delta.</li>
</ol>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="transformação-de-dados-com-dplyr.html#cb67-1" tabindex="-1"></a><span class="fu">filter</span>(flights, carrier <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;AA&quot;</span>, <span class="st">&quot;DL&quot;</span>, <span class="st">&quot;UA&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 139,504 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      542            540         2      923            850
##  4  2013     1     1      554            600        -6      812            837
##  5  2013     1     1      554            558        -4      740            728
##  6  2013     1     1      558            600        -2      753            745
##  7  2013     1     1      558            600        -2      924            917
##  8  2013     1     1      558            600        -2      923            937
##  9  2013     1     1      559            600        -1      941            910
## 10  2013     1     1      559            600        -1      854            902
## # ℹ 139,494 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<ol start="4" style="list-style-type: lower-alpha">
<li>Partiram em julho, agosto e setembro.</li>
</ol>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="transformação-de-dados-com-dplyr.html#cb69-1" tabindex="-1"></a><span class="fu">filter</span>(flights, month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>))</span></code></pre></div>
<pre><code>## # A tibble: 86,326 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     7     1        1           2029       212      236           2359
##  2  2013     7     1        2           2359         3      344            344
##  3  2013     7     1       29           2245       104      151              1
##  4  2013     7     1       43           2130       193      322             14
##  5  2013     7     1       44           2150       174      300            100
##  6  2013     7     1       46           2051       235      304           2358
##  7  2013     7     1       48           2001       287      308           2305
##  8  2013     7     1       58           2155       183      335             43
##  9  2013     7     1      100           2146       194      327             30
## 10  2013     7     1      100           2245       135      337            135
## # ℹ 86,316 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<ol start="5" style="list-style-type: lower-alpha">
<li>Chegaram com mais de duas horas de atraso, mas não saíram atrasados.</li>
</ol>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="transformação-de-dados-com-dplyr.html#cb71-1" tabindex="-1"></a><span class="fu">filter</span>(flights, dep_delay <span class="sc">&lt;=</span> <span class="dv">0</span>, arr_delay <span class="sc">&gt;</span> <span class="dv">120</span>)</span></code></pre></div>
<pre><code>## # A tibble: 29 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1    27     1419           1420        -1     1754           1550
##  2  2013    10     7     1350           1350         0     1736           1526
##  3  2013    10     7     1357           1359        -2     1858           1654
##  4  2013    10    16      657            700        -3     1258           1056
##  5  2013    11     1      658            700        -2     1329           1015
##  6  2013     3    18     1844           1847        -3       39           2219
##  7  2013     4    17     1635           1640        -5     2049           1845
##  8  2013     4    18      558            600        -2     1149            850
##  9  2013     4    18      655            700        -5     1213            950
## 10  2013     5    22     1827           1830        -3     2217           2010
## # ℹ 19 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<ol start="6" style="list-style-type: lower-alpha">
<li>Atrasaram pelo menos uma hora, mas compensaram mais de 30 minutos durante o trajeto.</li>
</ol>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="transformação-de-dados-com-dplyr.html#cb73-1" tabindex="-1"></a><span class="fu">filter</span>(flights, dep_delay <span class="sc">&gt;=</span> <span class="dv">60</span> <span class="sc">&amp;</span> dep_delay <span class="sc">-</span> arr_delay <span class="sc">&gt;=</span> <span class="dv">30</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2,074 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1     1716           1545        91     2140           2039
##  2  2013     1     1     2205           1720       285       46           2040
##  3  2013     1     1     2326           2130       116      131             18
##  4  2013     1     3     1503           1221       162     1803           1555
##  5  2013     1     3     1821           1530       171     2131           1910
##  6  2013     1     3     1839           1700        99     2056           1950
##  7  2013     1     3     1850           1745        65     2148           2120
##  8  2013     1     3     1923           1815        68     2036           1958
##  9  2013     1     3     1941           1759       102     2246           2139
## 10  2013     1     3     1950           1845        65     2228           2227
## # ℹ 2,064 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<ol start="7" style="list-style-type: lower-alpha">
<li>Saíram entre meia-noite e 6h (incluindo esses horários).</li>
</ol>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="transformação-de-dados-com-dplyr.html#cb75-1" tabindex="-1"></a><span class="fu">filter</span>(flights, dep_time <span class="sc">&gt;=</span> <span class="dv">0</span>, dep_time <span class="sc">&lt;=</span> <span class="dv">600</span>)</span></code></pre></div>
<pre><code>## # A tibble: 9,344 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      542            540         2      923            850
##  4  2013     1     1      544            545        -1     1004           1022
##  5  2013     1     1      554            600        -6      812            837
##  6  2013     1     1      554            558        -4      740            728
##  7  2013     1     1      555            600        -5      913            854
##  8  2013     1     1      557            600        -3      709            723
##  9  2013     1     1      557            600        -3      838            846
## 10  2013     1     1      558            600        -2      753            745
## # ℹ 9,334 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<div id="exr3-3-2" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.3.2<a href="transformação-de-dados-com-dplyr.html#exr3-3-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Outro ajudante da filtragem do <strong>dplyr</strong> é <code>between()</code>. O que ele faz? Você consegue utilizá-lo para simplificar o código necessário para responder os desafios anteriores?</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-41" class="solution"><em>Solução</em>. </span>O <code>between</code> recebe três parâmetros e verifica se o primeiro está entre o segundo e o terceiro.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="transformação-de-dados-com-dplyr.html#cb77-1" tabindex="-1"></a><span class="fu">filter</span>(flights, <span class="fu">between</span>(dep_time, <span class="dv">0</span>, <span class="dv">600</span>))</span></code></pre></div>
<pre><code>## # A tibble: 9,344 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      542            540         2      923            850
##  4  2013     1     1      544            545        -1     1004           1022
##  5  2013     1     1      554            600        -6      812            837
##  6  2013     1     1      554            558        -4      740            728
##  7  2013     1     1      555            600        -5      913            854
##  8  2013     1     1      557            600        -3      709            723
##  9  2013     1     1      557            600        -3      838            846
## 10  2013     1     1      558            600        -2      753            745
## # ℹ 9,334 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<div id="exr3-3-3" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.3.3<a href="transformação-de-dados-com-dplyr.html#exr3-3-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Quantos voos têm um <code>dep_time</code> faltante? Que outras variáveis estão faltando? O que essas linhas podem representar?</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-42" class="solution"><em>Solução</em>. </span></p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="transformação-de-dados-com-dplyr.html#cb79-1" tabindex="-1"></a><span class="fu">count</span>(flights, <span class="fu">is.na</span>(dep_time))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 2
##   `is.na(dep_time)`      n
##   &lt;lgl&gt;              &lt;int&gt;
## 1 FALSE             328521
## 2 TRUE                8255</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="transformação-de-dados-com-dplyr.html#cb81-1" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">is.na</span>(flights))</span></code></pre></div>
<pre><code>##     year           month            day           dep_time      
##  Mode :logical   Mode :logical   Mode :logical   Mode :logical  
##  FALSE:336776    FALSE:336776    FALSE:336776    FALSE:328521   
##                                                  TRUE :8255     
##  sched_dep_time  dep_delay        arr_time       sched_arr_time 
##  Mode :logical   Mode :logical   Mode :logical   Mode :logical  
##  FALSE:336776    FALSE:328521    FALSE:328063    FALSE:336776   
##                  TRUE :8255      TRUE :8713                     
##  arr_delay        carrier          flight         tailnum       
##  Mode :logical   Mode :logical   Mode :logical   Mode :logical  
##  FALSE:327346    FALSE:336776    FALSE:336776    FALSE:334264   
##  TRUE :9430                                      TRUE :2512     
##    origin           dest          air_time        distance      
##  Mode :logical   Mode :logical   Mode :logical   Mode :logical  
##  FALSE:336776    FALSE:336776    FALSE:327346    FALSE:336776   
##                                  TRUE :9430                     
##     hour           minute        time_hour      
##  Mode :logical   Mode :logical   Mode :logical  
##  FALSE:336776    FALSE:336776    FALSE:336776   
## </code></pre>
<p>São 8255 voos com <code>dep_time</code> faltante, o que pode indicar voos cancelados. As seguintes colunas também possuem dados faltantes: <code>dep_delay</code>, <code>arr_time</code>, <code>arr_delay</code>, <code>tailnum</code> e <code>air_time</code>.</p>
</div>
</div>
<div id="exr3-3-4" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.3.4<a href="transformação-de-dados-com-dplyr.html#exr3-3-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Por que <code>NA ^ 0</code> não é um valor faltante? Por que <code>NA | TRUE</code> não é um valor faltante? Por que <code>FALSE &amp; NA</code> não é um valor faltante? Você consegue descobrir a regra geral? (<code>NA * 0</code> é um contraexemplo complicado!)</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-43" class="solution"><em>Solução</em>. </span><code>NA ^ 0</code> resulta em um, pois qualquer número real satisfaz essa mesma condição. A regra geral parece ser que, ao avaliar a expressão, sempre que o valor que <code>NA</code> representaria for indiferente para o resultado da expressão, então será retornado um valor diferente de <code>NA</code>.</p>
</div>
</div>
</div>
<div id="ordenar-linhas-com-arrange" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Ordenar linhas com <code>arrange()</code><a href="transformação-de-dados-com-dplyr.html#ordenar-linhas-com-arrange" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="exr3-4-1" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.4.1<a href="transformação-de-dados-com-dplyr.html#exr3-4-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Como você poderia usar <code>arrange()</code> para classificar todos os valores faltantes no começo? (dica: use <code>is.na()</code>.)</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-44" class="solution"><em>Solução</em>. </span></p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="transformação-de-dados-com-dplyr.html#cb83-1" tabindex="-1"></a><span class="fu">arrange</span>(</span>
<span id="cb83-2"><a href="transformação-de-dados-com-dplyr.html#cb83-2" tabindex="-1"></a>  flights, </span>
<span id="cb83-3"><a href="transformação-de-dados-com-dplyr.html#cb83-3" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(year), </span>
<span id="cb83-4"><a href="transformação-de-dados-com-dplyr.html#cb83-4" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(month), </span>
<span id="cb83-5"><a href="transformação-de-dados-com-dplyr.html#cb83-5" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(day), </span>
<span id="cb83-6"><a href="transformação-de-dados-com-dplyr.html#cb83-6" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(dep_time), </span>
<span id="cb83-7"><a href="transformação-de-dados-com-dplyr.html#cb83-7" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(sched_dep_time), </span>
<span id="cb83-8"><a href="transformação-de-dados-com-dplyr.html#cb83-8" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(dep_delay), </span>
<span id="cb83-9"><a href="transformação-de-dados-com-dplyr.html#cb83-9" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(arr_time), </span>
<span id="cb83-10"><a href="transformação-de-dados-com-dplyr.html#cb83-10" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(sched_arr_time), </span>
<span id="cb83-11"><a href="transformação-de-dados-com-dplyr.html#cb83-11" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(arr_delay), </span>
<span id="cb83-12"><a href="transformação-de-dados-com-dplyr.html#cb83-12" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(carrier), </span>
<span id="cb83-13"><a href="transformação-de-dados-com-dplyr.html#cb83-13" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(flight), </span>
<span id="cb83-14"><a href="transformação-de-dados-com-dplyr.html#cb83-14" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(tailnum), </span>
<span id="cb83-15"><a href="transformação-de-dados-com-dplyr.html#cb83-15" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(origin), </span>
<span id="cb83-16"><a href="transformação-de-dados-com-dplyr.html#cb83-16" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(dest), </span>
<span id="cb83-17"><a href="transformação-de-dados-com-dplyr.html#cb83-17" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(air_time), </span>
<span id="cb83-18"><a href="transformação-de-dados-com-dplyr.html#cb83-18" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(distance), </span>
<span id="cb83-19"><a href="transformação-de-dados-com-dplyr.html#cb83-19" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(hour), </span>
<span id="cb83-20"><a href="transformação-de-dados-com-dplyr.html#cb83-20" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(minute), </span>
<span id="cb83-21"><a href="transformação-de-dados-com-dplyr.html#cb83-21" tabindex="-1"></a>  <span class="sc">!</span><span class="fu">is.na</span>(time_hour)</span>
<span id="cb83-22"><a href="transformação-de-dados-com-dplyr.html#cb83-22" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     2       NA           1545        NA       NA           1910
##  2  2013     1     2       NA           1601        NA       NA           1735
##  3  2013     1     3       NA            857        NA       NA           1209
##  4  2013     1     3       NA            645        NA       NA            952
##  5  2013     1     4       NA            845        NA       NA           1015
##  6  2013     1     4       NA           1830        NA       NA           2044
##  7  2013     1     5       NA            840        NA       NA           1001
##  8  2013     1     7       NA            820        NA       NA            958
##  9  2013     1     8       NA           1645        NA       NA           1838
## 10  2013     1     9       NA            755        NA       NA           1012
## # ℹ 336,766 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
<div class="remark">
<p><span id="unlabeled-div-45" class="remark"><em>Observação</em>. </span>Deve haver uma solução muito mais elegante para este problema.</p>
</div>
</div>
<div id="exr3-4-2" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.4.2<a href="transformação-de-dados-com-dplyr.html#exr3-4-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Ordene <code>flights</code> para encontrar os voos mais atrasados. Encontre os voos que saíram mais cedo.</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-46" class="solution"><em>Solução</em>. </span>Voos mais atrasados:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="transformação-de-dados-com-dplyr.html#cb85-1" tabindex="-1"></a><span class="fu">arrange</span>(flights, <span class="fu">desc</span>(dep_delay))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     9      641            900      1301     1242           1530
##  2  2013     6    15     1432           1935      1137     1607           2120
##  3  2013     1    10     1121           1635      1126     1239           1810
##  4  2013     9    20     1139           1845      1014     1457           2210
##  5  2013     7    22      845           1600      1005     1044           1815
##  6  2013     4    10     1100           1900       960     1342           2211
##  7  2013     3    17     2321            810       911      135           1020
##  8  2013     6    27      959           1900       899     1236           2226
##  9  2013     7    22     2257            759       898      121           1026
## 10  2013    12     5      756           1700       896     1058           2020
## # ℹ 336,766 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>Voos que saíram mais cedo:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="transformação-de-dados-com-dplyr.html#cb87-1" tabindex="-1"></a><span class="fu">arrange</span>(flights, dep_time)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1    13        1           2249        72      108           2357
##  2  2013     1    31        1           2100       181      124           2225
##  3  2013    11    13        1           2359         2      442            440
##  4  2013    12    16        1           2359         2      447            437
##  5  2013    12    20        1           2359         2      430            440
##  6  2013    12    26        1           2359         2      437            440
##  7  2013    12    30        1           2359         2      441            437
##  8  2013     2    11        1           2100       181      111           2225
##  9  2013     2    24        1           2245        76      121           2354
## 10  2013     3     8        1           2355         6      431            440
## # ℹ 336,766 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<div id="exr3-4-3" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.4.3<a href="transformação-de-dados-com-dplyr.html#exr3-4-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Ordene <code>flights</code> para encontrar os voos mais rápidos.</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-47" class="solution"><em>Solução</em>. </span></p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="transformação-de-dados-com-dplyr.html#cb89-1" tabindex="-1"></a><span class="fu">arrange</span>(flights, air_time)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1    16     1355           1315        40     1442           1411
##  2  2013     4    13      537            527        10      622            628
##  3  2013    12     6      922            851        31     1021            954
##  4  2013     2     3     2153           2129        24     2247           2224
##  5  2013     2     5     1303           1315       -12     1342           1411
##  6  2013     2    12     2123           2130        -7     2211           2225
##  7  2013     3     2     1450           1500       -10     1547           1608
##  8  2013     3     8     2026           1935        51     2131           2056
##  9  2013     3    18     1456           1329        87     1533           1426
## 10  2013     3    19     2226           2145        41     2305           2246
## # ℹ 336,766 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
<div id="exr3-4-4" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.4.4<a href="transformação-de-dados-com-dplyr.html#exr3-4-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Quais voos viajaram por mais tempo? Quais viajaram por menos tempo?</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-48" class="solution"><em>Solução</em>. </span>Voos que viajaram por mais tempo:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="transformação-de-dados-com-dplyr.html#cb91-1" tabindex="-1"></a><span class="fu">arrange</span>(flights, <span class="fu">desc</span>(air_time))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     3    17     1337           1335         2     1937           1836
##  2  2013     2     6      853            900        -7     1542           1540
##  3  2013     3    15     1001           1000         1     1551           1530
##  4  2013     3    17     1006           1000         6     1607           1530
##  5  2013     3    16     1001           1000         1     1544           1530
##  6  2013     2     5      900            900         0     1555           1540
##  7  2013    11    12      936            930         6     1630           1530
##  8  2013     3    14      958           1000        -2     1542           1530
##  9  2013    11    20     1006           1000         6     1639           1555
## 10  2013     3    15     1342           1335         7     1924           1836
## # ℹ 336,766 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>Voos que viajaram por menos tempo:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="transformação-de-dados-com-dplyr.html#cb93-1" tabindex="-1"></a><span class="fu">arrange</span>(flights, air_time)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1    16     1355           1315        40     1442           1411
##  2  2013     4    13      537            527        10      622            628
##  3  2013    12     6      922            851        31     1021            954
##  4  2013     2     3     2153           2129        24     2247           2224
##  5  2013     2     5     1303           1315       -12     1342           1411
##  6  2013     2    12     2123           2130        -7     2211           2225
##  7  2013     3     2     1450           1500       -10     1547           1608
##  8  2013     3     8     2026           1935        51     2131           2056
##  9  2013     3    18     1456           1329        87     1533           1426
## 10  2013     3    19     2226           2145        41     2305           2246
## # ℹ 336,766 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
</div>
</div>
</div>
<div id="selecionar-colunas-com-select" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Selecionar colunas com <code>select()</code><a href="transformação-de-dados-com-dplyr.html#selecionar-colunas-com-select" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="exr3-5-1" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.5.1<a href="transformação-de-dados-com-dplyr.html#exr3-5-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Faça um <em>brainstorm</em> da maior quantidade possível de maneiras de selecionar <code>dep_time</code>, <code>dep_delay</code>, <code>arr_time</code> e <code>air_delay</code> de <code>flights</code>.</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-49" class="solution"><em>Solução</em>. </span>x</p>
</div>
</div>
<div id="exr3-5-2" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.5.2<a href="transformação-de-dados-com-dplyr.html#exr3-5-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>O que acontece se você incluir o nome de uma variável varias vezes em uma chamada <code>select()</code>?</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-50" class="solution"><em>Solução</em>. </span></p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="transformação-de-dados-com-dplyr.html#cb95-1" tabindex="-1"></a><span class="fu">select</span>(flights, arr_time, arr_time, arr_time)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 1
##    arr_time
##       &lt;int&gt;
##  1      830
##  2      850
##  3      923
##  4     1004
##  5      812
##  6      740
##  7      913
##  8      709
##  9      838
## 10      753
## # ℹ 336,766 more rows</code></pre>
<p>A variável em questão é selecionada apenas uma vez.</p>
</div>
</div>
<div id="exr3-5-3" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.5.3<a href="transformação-de-dados-com-dplyr.html#exr3-5-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>O que a função <code>one_of()</code> faz? Por que poderia ser útil em conjunção com este vetor?</p>
<pre><code>vars &lt;- c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;, &quot;dep_delay&quot;, &quot;arr_delay&quot;)</code></pre>
</div>
<div class="solution">
<p><span id="unlabeled-div-51" class="solution"><em>Solução</em>. </span></p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="transformação-de-dados-com-dplyr.html#cb98-1" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>, <span class="st">&quot;dep_delay&quot;</span>, <span class="st">&quot;arr_delay&quot;</span>)</span>
<span id="cb98-2"><a href="transformação-de-dados-com-dplyr.html#cb98-2" tabindex="-1"></a><span class="fu">select</span>(flights, <span class="fu">one_of</span>(vars)) <span class="co"># superseded in favor of `any_of()`</span></span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 5
##     year month   day dep_delay arr_delay
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;
##  1  2013     1     1         2        11
##  2  2013     1     1         4        20
##  3  2013     1     1         2        33
##  4  2013     1     1        -1       -18
##  5  2013     1     1        -6       -25
##  6  2013     1     1        -4        12
##  7  2013     1     1        -5        19
##  8  2013     1     1        -3       -14
##  9  2013     1     1        -3        -8
## 10  2013     1     1        -2         8
## # ℹ 336,766 more rows</code></pre>
<p>A função <code>one_of()</code>, substituída por <code>any_of()</code> serve para indicar que devem ser selecionadas todas as colunas cujos nomes estejam no <em>array</em>.</p>
</div>
</div>
<div id="exr3-5-4" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.5.4<a href="transformação-de-dados-com-dplyr.html#exr3-5-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>O resultado ao executar o código a seguir lhe surpreende? Como as funções auxiliares lidam com o caso por padrão? Como você pode mudar esse padrão?</p>
<pre><code>select(flights, contains(&quot;TIME&quot;))</code></pre>
</div>
<div class="solution">
<p><span id="unlabeled-div-52" class="solution"><em>Solução</em>. </span></p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="transformação-de-dados-com-dplyr.html#cb101-1" tabindex="-1"></a><span class="fu">select</span>(flights, <span class="fu">contains</span>(<span class="st">&quot;TIME&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 6
##    dep_time sched_dep_time arr_time sched_arr_time air_time time_hour          
##       &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt; &lt;dttm&gt;             
##  1      517            515      830            819      227 2013-01-01 05:00:00
##  2      533            529      850            830      227 2013-01-01 05:00:00
##  3      542            540      923            850      160 2013-01-01 05:00:00
##  4      544            545     1004           1022      183 2013-01-01 05:00:00
##  5      554            600      812            837      116 2013-01-01 06:00:00
##  6      554            558      740            728      150 2013-01-01 05:00:00
##  7      555            600      913            854      158 2013-01-01 06:00:00
##  8      557            600      709            723       53 2013-01-01 06:00:00
##  9      557            600      838            846      140 2013-01-01 06:00:00
## 10      558            600      753            745      138 2013-01-01 06:00:00
## # ℹ 336,766 more rows</code></pre>
<p>O caso não surpreende. São retornadas todas as colunas que possuem “TIME” em seus nomes, não diferenciando maíusculas e minúsculas. O comportamento pode ser alterado da seguinte forma:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="transformação-de-dados-com-dplyr.html#cb103-1" tabindex="-1"></a><span class="fu">select</span>(flights, <span class="fu">contains</span>(<span class="st">&quot;TIME&quot;</span>, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 0</code></pre>
</div>
</div>
</div>
<div id="adicionar-novas-variáveis-com-mutate" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Adicionar novas variáveis com <code>mutate()</code><a href="transformação-de-dados-com-dplyr.html#adicionar-novas-variáveis-com-mutate" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="exr3-6-1" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.6.1<a href="transformação-de-dados-com-dplyr.html#exr3-6-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Atualmente, <code>dep_time</code> e <code>sched_dep_time</code> são convenientes para observar, mas difíceis de usar para calcular, porque não são realmente números contínuos. Converta-os para uma representação mais apropriada do número de minutos desde a meia-noite.</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-53" class="solution"><em>Solução</em>. </span></p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="transformação-de-dados-com-dplyr.html#cb105-1" tabindex="-1"></a>(flights_min <span class="ot">&lt;-</span> <span class="fu">mutate</span>(</span>
<span id="cb105-2"><a href="transformação-de-dados-com-dplyr.html#cb105-2" tabindex="-1"></a>                    flights,</span>
<span id="cb105-3"><a href="transformação-de-dados-com-dplyr.html#cb105-3" tabindex="-1"></a>                    <span class="at">dep_time_minutes =</span> <span class="dv">60</span> <span class="sc">*</span> (dep_time <span class="sc">%/%</span> <span class="dv">100</span>) <span class="sc">+</span> (dep_time <span class="sc">%%</span> <span class="dv">100</span>),</span>
<span id="cb105-4"><a href="transformação-de-dados-com-dplyr.html#cb105-4" tabindex="-1"></a>                    <span class="at">sched_dep_time_minutes =</span> <span class="dv">60</span> <span class="sc">*</span> (sched_dep_time <span class="sc">%/%</span> <span class="dv">100</span>) <span class="sc">+</span> (sched_dep_time <span class="sc">%%</span> <span class="dv">100</span>),</span>
<span id="cb105-5"><a href="transformação-de-dados-com-dplyr.html#cb105-5" tabindex="-1"></a>                    <span class="at">arr_time_minutes =</span> <span class="dv">60</span> <span class="sc">*</span> (arr_time <span class="sc">%/%</span> <span class="dv">100</span>) <span class="sc">+</span> (arr_time <span class="sc">%%</span> <span class="dv">100</span>)</span>
<span id="cb105-6"><a href="transformação-de-dados-com-dplyr.html#cb105-6" tabindex="-1"></a>                ))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 22
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      542            540         2      923            850
##  4  2013     1     1      544            545        -1     1004           1022
##  5  2013     1     1      554            600        -6      812            837
##  6  2013     1     1      554            558        -4      740            728
##  7  2013     1     1      555            600        -5      913            854
##  8  2013     1     1      557            600        -3      709            723
##  9  2013     1     1      557            600        -3      838            846
## 10  2013     1     1      558            600        -2      753            745
## # ℹ 336,766 more rows
## # ℹ 14 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, dep_time_minutes &lt;dbl&gt;,
## #   sched_dep_time_minutes &lt;dbl&gt;, arr_time_minutes &lt;dbl&gt;</code></pre>
</div>
</div>
<div id="exr3-6-2" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.6.2<a href="transformação-de-dados-com-dplyr.html#exr3-6-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Compare <code>air_time</code> e <code>arr_time - dep_time</code>. O que você espera ver? O que você vê? O que você precisa fazer para corrigir isso?</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-54" class="solution"><em>Solução</em>. </span></p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="transformação-de-dados-com-dplyr.html#cb107-1" tabindex="-1"></a><span class="fu">transmute</span>(flights_min, air_time, arr_time_minutes <span class="sc">-</span> dep_time_minutes)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 2
##    air_time `arr_time_minutes - dep_time_minutes`
##       &lt;dbl&gt;                                 &lt;dbl&gt;
##  1      227                                   193
##  2      227                                   197
##  3      160                                   221
##  4      183                                   260
##  5      116                                   138
##  6      150                                   106
##  7      158                                   198
##  8       53                                    72
##  9      140                                   161
## 10      138                                   115
## # ℹ 336,766 more rows</code></pre>
<p>Como os valores <code>arr_time</code> e <code>dep_time</code> não são números de fato, a diferença não faz sentido e assim o cálculo gera uma diferença muito grande. Para corrigir isso, primeiro teremos que converter os valores dessas duas variáveis para o número de minutos desde a meia noite e, depois, efetuar a diferença. Ainda assim, pode haver divergência entre esse valor e <code>air_time</code>, que pode ser explicada por chegada antecipada, saída atrasada ou porque um vôo chegou ao seu destino após a meia-noite.</p>
</div>
</div>
<div id="exr3-6-3" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.6.3<a href="transformação-de-dados-com-dplyr.html#exr3-6-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Compare <code>dep_time</code>, <code>sched_dep_time</code> e <code>dep_delay</code>. Como você espera que esses números estejam relacionados?</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-55" class="solution"><em>Solução</em>. </span></p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="transformação-de-dados-com-dplyr.html#cb109-1" tabindex="-1"></a><span class="fu">select</span>(flights_min, <span class="st">&quot;dep_time&quot;</span>, <span class="st">&quot;sched_dep_time&quot;</span>, dep_delay)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 3
##    dep_time sched_dep_time dep_delay
##       &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;
##  1      517            515         2
##  2      533            529         4
##  3      542            540         2
##  4      544            545        -1
##  5      554            600        -6
##  6      554            558        -4
##  7      555            600        -5
##  8      557            600        -3
##  9      557            600        -3
## 10      558            600        -2
## # ℹ 336,766 more rows</code></pre>
<p>É esperado que <code>dep_time = sched_dep_time + dep_delay</code>.</p>
</div>
</div>
<div id="exr3-6-4" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.6.4<a href="transformação-de-dados-com-dplyr.html#exr3-6-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Encontre os 10 voos mais atrasados usando uma função de classificação. Como você quer lidar com empates? Leia cuidadosamente a documentação de <code>min_rank()</code>.</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-56" class="solution"><em>Solução</em>. </span></p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="transformação-de-dados-com-dplyr.html#cb111-1" tabindex="-1"></a><span class="fu">filter</span>(</span>
<span id="cb111-2"><a href="transformação-de-dados-com-dplyr.html#cb111-2" tabindex="-1"></a>    flights,</span>
<span id="cb111-3"><a href="transformação-de-dados-com-dplyr.html#cb111-3" tabindex="-1"></a>    <span class="fu">between</span>(<span class="fu">rank</span>(<span class="fu">desc</span>(flights<span class="sc">$</span>dep_delay), <span class="at">ties.method =</span> <span class="st">&quot;min&quot;</span>), <span class="dv">1</span>, <span class="dv">10</span>)</span>
<span id="cb111-4"><a href="transformação-de-dados-com-dplyr.html#cb111-4" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     9      641            900      1301     1242           1530
##  2  2013     1    10     1121           1635      1126     1239           1810
##  3  2013    12     5      756           1700       896     1058           2020
##  4  2013     3    17     2321            810       911      135           1020
##  5  2013     4    10     1100           1900       960     1342           2211
##  6  2013     6    15     1432           1935      1137     1607           2120
##  7  2013     6    27      959           1900       899     1236           2226
##  8  2013     7    22      845           1600      1005     1044           1815
##  9  2013     7    22     2257            759       898      121           1026
## 10  2013     9    20     1139           1845      1014     1457           2210
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>Usei a função <code>rank</code> e os empates foram tratados com o parâmetro <code>ties.method</code> setado como <code>min</code>.</p>
</div>
</div>
<div id="exr3-6-5" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.6.5<a href="transformação-de-dados-com-dplyr.html#exr3-6-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>O que <code>1:3 + 1:10</code> retorna? Por quê?</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-57" class="solution"><em>Solução</em>. </span></p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="transformação-de-dados-com-dplyr.html#cb113-1" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">3</span> <span class="sc">+</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code></pre></div>
<pre><code>## Warning in 1:3 + 1:10: comprimento do objeto maior não é múltiplo do
## comprimento do objeto menor</code></pre>
<pre><code>##  [1]  2  4  6  5  7  9  8 10 12 11</code></pre>
<p>Como os vetores têm tamanhos diferentes, a soma vai ser executada entre as posições e, quando o menor dos vetores tiver sido completamente consumido, será tomado novamente o primeiro elemento (como em um movimento circular).</p>
</div>
</div>
<div id="exr3-6-6" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.6.6<a href="transformação-de-dados-com-dplyr.html#exr3-6-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Quais funções trigonométricas o R fornece?</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-58" class="solution"><em>Solução</em>. </span>Utilizamos o comando <code>?cos</code> para chegar até a documentação do pacote <code>Trig</code>, um dos componentes da base do R.</p>
<p>O R fornece as funções <code>cos(x)</code>, <code>sin(x)</code>, <code>tan(x)</code>, <code>acos(x)</code>, <code>asin(x)</code>, <code>atan(x)</code>, <code>atan2(y, x)</code> (arco tangente entre dois vetores), <code>cospi(x)</code>, <code>sinpi(x)</code> e <code>tanpi(x)</code>.</p>
</div>
</div>
</div>
<div id="resumos-agrupados-com-summarize" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> Resumos agrupados com <code>summarize()</code><a href="transformação-de-dados-com-dplyr.html#resumos-agrupados-com-summarize" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="exr3-7-1" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.7.1<a href="transformação-de-dados-com-dplyr.html#exr3-7-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Faça um <em>brainstorming</em> de pelo menos cinco maneiras diferentes de avaliar as características do atraso típico de um grupo de voos. Considere os seguintes cenários:</p>
<ul>
<li>Um voo está 15 minutos adiantado em 50% do tempo e 15 minutos atrasado em 50% do tempo.</li>
<li>Um voo está sempre 10 min atrasado.</li>
<li>Um voo está 30 minutos adiantado em 50% do tempo e 30 minutos atrasado em 50% do tempo.</li>
<li>Em 99% do tempo um voo está no horário. Em 1% do tempo, está 2 horas atrasado.</li>
</ul>
<p>O que é mais importante: atrsado na chegada ou atraso na partida?</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-59" class="solution"><em>Solução</em>. </span>x</p>
</div>
</div>
<div id="exr3-7-2" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.7.2<a href="transformação-de-dados-com-dplyr.html#exr3-7-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Crie outra abordagem que lhe dará o mesmo resultado que <code>not_cancelled %&gt;% count(dest)</code> e <code>not_cancelled %&gt;% count(tailnum, wt = distance)</code> (sem usar <code>count()</code>).</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-60" class="solution"><em>Solução</em>. </span></p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="transformação-de-dados-com-dplyr.html#cb116-1" tabindex="-1"></a>not_cancelled <span class="sc">%&gt;%</span></span>
<span id="cb116-2"><a href="transformação-de-dados-com-dplyr.html#cb116-2" tabindex="-1"></a>    <span class="fu">group_by</span>(dest) <span class="sc">%&gt;%</span></span>
<span id="cb116-3"><a href="transformação-de-dados-com-dplyr.html#cb116-3" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 104 × 2
##    dest      n
##    &lt;chr&gt; &lt;int&gt;
##  1 ABQ     254
##  2 ACK     264
##  3 ALB     418
##  4 ANC       8
##  5 ATL   16837
##  6 AUS    2411
##  7 AVL     261
##  8 BDL     412
##  9 BGR     358
## 10 BHM     269
## # ℹ 94 more rows</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="transformação-de-dados-com-dplyr.html#cb118-1" tabindex="-1"></a>not_cancelled <span class="sc">%&gt;%</span></span>
<span id="cb118-2"><a href="transformação-de-dados-com-dplyr.html#cb118-2" tabindex="-1"></a>    <span class="fu">group_by</span>(tailnum) <span class="sc">%&gt;%</span></span>
<span id="cb118-3"><a href="transformação-de-dados-com-dplyr.html#cb118-3" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">sum</span>(distance))</span></code></pre></div>
<pre><code>## # A tibble: 4,037 × 2
##    tailnum      n
##    &lt;chr&gt;    &lt;dbl&gt;
##  1 D942DN    3418
##  2 N0EGMQ  239143
##  3 N10156  109664
##  4 N102UW   25722
##  5 N103US   24619
##  6 N104UW   24616
##  7 N10575  139903
##  8 N105UW   23618
##  9 N107US   21677
## 10 N108UW   32070
## # ℹ 4,027 more rows</code></pre>
</div>
</div>
<div id="exr3-7-3" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.7.3<a href="transformação-de-dados-com-dplyr.html#exr3-7-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Nossa definição de voos cancelados (<code>is.na(dep_delay) | is.na(arr_delay)</code>) é ligeiramente insuficiente. Por quê? Qual é a coluna mais importante?</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-61" class="solution"><em>Solução</em>. </span>As váriáveis <code>dep_delay</code> e <code>arr_delay</code> se referem ao atraso na partida ou na chegada dos voos. Caso um voo tenha saído e chegado no horário exato, esses valores podem estar <code>NA</code>, ou seja, o voo não foi cancelado, apenas partiu e chegou no horário planejado. Nesse caso, o mais correto seria considerar como cancelados os voos <code>dep_time</code> é <code>NA</code>.</p>
</div>
</div>
<div id="exr3-7-4" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.7.4<a href="transformação-de-dados-com-dplyr.html#exr3-7-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Veja o número de voos cancelados por dia. Existe um padrão? A proporção de voos cancelados está relacionado ao atraso médio?</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-62" class="solution"><em>Solução</em>. </span></p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="transformação-de-dados-com-dplyr.html#cb120-1" tabindex="-1"></a>cancelled_by_day <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span></span>
<span id="cb120-2"><a href="transformação-de-dados-com-dplyr.html#cb120-2" tabindex="-1"></a>                        <span class="fu">group_by</span>(year, month, day) <span class="sc">%&gt;%</span></span>
<span id="cb120-3"><a href="transformação-de-dados-com-dplyr.html#cb120-3" tabindex="-1"></a>                        <span class="fu">summarise</span>(</span>
<span id="cb120-4"><a href="transformação-de-dados-com-dplyr.html#cb120-4" tabindex="-1"></a>                            <span class="at">date =</span> <span class="fu">as.Date</span>(<span class="fu">paste</span>(year, month, day, <span class="at">sep=</span><span class="st">&#39;-&#39;</span>)),</span>
<span id="cb120-5"><a href="transformação-de-dados-com-dplyr.html#cb120-5" tabindex="-1"></a>                            <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb120-6"><a href="transformação-de-dados-com-dplyr.html#cb120-6" tabindex="-1"></a>                            <span class="at">count_cancelled =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(dep_time)),</span>
<span id="cb120-7"><a href="transformação-de-dados-com-dplyr.html#cb120-7" tabindex="-1"></a>                            <span class="at">count_not_cancelled =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_time)),</span>
<span id="cb120-8"><a href="transformação-de-dados-com-dplyr.html#cb120-8" tabindex="-1"></a>                            <span class="at">mean_dep_delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-9"><a href="transformação-de-dados-com-dplyr.html#cb120-9" tabindex="-1"></a>                            <span class="at">mean_arr_delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-10"><a href="transformação-de-dados-com-dplyr.html#cb120-10" tabindex="-1"></a>                        )</span></code></pre></div>
<pre><code>## Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
## dplyr 1.1.0.
## ℹ Please use `reframe()` instead.
## ℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`
##   always returns an ungrouped data frame and adjust accordingly.
## Call `lifecycle::last_lifecycle_warnings()` to see where this warning was
## generated.</code></pre>
<pre><code>## `summarise()` has grouped output by &#39;year&#39;, &#39;month&#39;, &#39;day&#39;. You can override
## using the `.groups` argument.</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="transformação-de-dados-com-dplyr.html#cb123-1" tabindex="-1"></a>cancelled_by_day <span class="sc">%&gt;%</span></span>
<span id="cb123-2"><a href="transformação-de-dados-com-dplyr.html#cb123-2" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(mean_dep_delay, count_cancelled <span class="sc">/</span> count)) <span class="sc">+</span></span>
<span id="cb123-3"><a href="transformação-de-dados-com-dplyr.html#cb123-3" tabindex="-1"></a>        <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb123-4"><a href="transformação-de-dados-com-dplyr.html#cb123-4" tabindex="-1"></a>        <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb123-5"><a href="transformação-de-dados-com-dplyr.html#cb123-5" tabindex="-1"></a>        <span class="fu">labs</span>(</span>
<span id="cb123-6"><a href="transformação-de-dados-com-dplyr.html#cb123-6" tabindex="-1"></a>            <span class="at">title =</span> <span class="st">&quot;Número de voos cancelados conforme o tempo médio de atraso no dia&quot;</span>,</span>
<span id="cb123-7"><a href="transformação-de-dados-com-dplyr.html#cb123-7" tabindex="-1"></a>            <span class="at">x =</span> <span class="st">&quot;Tempo médio de atraso na partida (min)&quot;</span>,</span>
<span id="cb123-8"><a href="transformação-de-dados-com-dplyr.html#cb123-8" tabindex="-1"></a>            <span class="at">y =</span> <span class="st">&quot;Número de cancelamentos&quot;</span></span>
<span id="cb123-9"><a href="transformação-de-dados-com-dplyr.html#cb123-9" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb123-10"><a href="transformação-de-dados-com-dplyr.html#cb123-10" tabindex="-1"></a>        <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">80</span>) <span class="sc">+</span></span>
<span id="cb123-11"><a href="transformação-de-dados-com-dplyr.html#cb123-11" tabindex="-1"></a>        <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb123-12"><a href="transformação-de-dados-com-dplyr.html#cb123-12" tabindex="-1"></a>        tema</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Removed 12409 rows containing non-finite values (`stat_smooth()`).</code></pre>
<pre><code>## Warning: Removed 12409 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="r4ds_files/figure-html/unnamed-chunk-67-1.png" width="672" /></p>
<p>Parece existir uma relação entre o número de coos cancelados no dia e a média de atraso nos voos desse mesmo dia. Caso haja alguma condição desfavorável (tempo ruim, problemas na pista de decolagem/pouso, etc), o intervalo entre uma decolagem/pouso e outro pode aumentar significativamente gerando atrasos que se acumulam a ponto de alguns voos terem que ser cancelados (esse comportamento é real?).</p>
</div>
</div>
<div id="exr3-7-5" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.7.5<a href="transformação-de-dados-com-dplyr.html#exr3-7-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Qual companhia tem os piores atrasos? Desafio: você consegue desembaralhar o efeito dos aeroportus ruins <em>versus</em> companhiars ruins? Por quê/Por que não? ( Dica: pense em <code>flights %&gt;% group_by(cartier, dest) %&gt;% summarize(n())</code>)</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-63" class="solution"><em>Solução</em>. </span>Para verificar qual companhia tem os piores atrasos, vamos calcular o atraso médio por companhia.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="transformação-de-dados-com-dplyr.html#cb127-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb127-2"><a href="transformação-de-dados-com-dplyr.html#cb127-2" tabindex="-1"></a>    <span class="fu">group_by</span>(carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb127-3"><a href="transformação-de-dados-com-dplyr.html#cb127-3" tabindex="-1"></a>    <span class="fu">summarize</span>(</span>
<span id="cb127-4"><a href="transformação-de-dados-com-dplyr.html#cb127-4" tabindex="-1"></a>        <span class="at">mean_delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb127-5"><a href="transformação-de-dados-com-dplyr.html#cb127-5" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb127-6"><a href="transformação-de-dados-com-dplyr.html#cb127-6" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_delay))</span></code></pre></div>
<pre><code>## # A tibble: 16 × 2
##    carrier mean_delay
##    &lt;chr&gt;        &lt;dbl&gt;
##  1 F9          21.9  
##  2 FL          20.1  
##  3 EV          15.8  
##  4 YV          15.6  
##  5 OO          11.9  
##  6 MQ          10.8  
##  7 WN           9.65 
##  8 B6           9.46 
##  9 9E           7.38 
## 10 UA           3.56 
## 11 US           2.13 
## 12 VX           1.76 
## 13 DL           1.64 
## 14 AA           0.364
## 15 HA          -6.92 
## 16 AS          -9.93</code></pre>
<p>Podemos notar que a companhia com o maior atraso médio é a F9 (Frontier Airlines Inc).</p>
<p>Para tentar desembaralhar o efeito de aeroportos ruins e companhias ruins, vamos:</p>
<ul>
<li>filtrar apenas os voos com atraso;</li>
<li>agrupar os voos conforme as rotas e companhias;</li>
<li>calcular o atraso médio e o total de voos por companhia no trecho (<code>arr_delay</code> e <code>flights</code>);</li>
<li>calcular o atraso médio e o total de voos do trecho de todas as companhias (<code>arr_delay_total</code> e <code>flights_total</code>);</li>
<li>calcular o atraso médio por voo da companhia (<code>arr_delay_mean &lt;- arr_delay / flights</code>);</li>
<li>calcular o atraso “médio” das demais companhias (<code>arr_delay_others &lt;- (arr_delay_total - arr_delay) / (flights_total - fligths)</code>);</li>
<li>calcular a diferença entre o atraso médio da companhia e o atraso médio das outras companhias juntas (<code>arr_delay_diff &lt;- arr_delay_mean - arr_delay_others</code>);</li>
<li>remover valores cuja diferença não faça sentido (<code>is.finite(arr_delay_diff)</code>);</li>
<li>agrupar por companhia;</li>
<li>calcular a média das diferenças de atraso da companhia (<code>arr_delay_diff</code>);</li>
</ul>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="transformação-de-dados-com-dplyr.html#cb129-1" tabindex="-1"></a>(atrasos <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span> </span>
<span id="cb129-2"><a href="transformação-de-dados-com-dplyr.html#cb129-2" tabindex="-1"></a>                <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(arr_delay)) <span class="sc">%&gt;%</span></span>
<span id="cb129-3"><a href="transformação-de-dados-com-dplyr.html#cb129-3" tabindex="-1"></a>                <span class="fu">group_by</span>(origin, dest, carrier) <span class="sc">%&gt;%</span></span>
<span id="cb129-4"><a href="transformação-de-dados-com-dplyr.html#cb129-4" tabindex="-1"></a>                <span class="fu">summarise</span>(</span>
<span id="cb129-5"><a href="transformação-de-dados-com-dplyr.html#cb129-5" tabindex="-1"></a>                    <span class="at">arr_delay =</span> <span class="fu">sum</span>(arr_delay),</span>
<span id="cb129-6"><a href="transformação-de-dados-com-dplyr.html#cb129-6" tabindex="-1"></a>                    <span class="at">flights =</span> <span class="fu">n</span>()</span>
<span id="cb129-7"><a href="transformação-de-dados-com-dplyr.html#cb129-7" tabindex="-1"></a>                ) <span class="sc">%&gt;%</span></span>
<span id="cb129-8"><a href="transformação-de-dados-com-dplyr.html#cb129-8" tabindex="-1"></a>                <span class="fu">group_by</span>(origin, dest) <span class="sc">%&gt;%</span></span>
<span id="cb129-9"><a href="transformação-de-dados-com-dplyr.html#cb129-9" tabindex="-1"></a>                <span class="fu">mutate</span>(</span>
<span id="cb129-10"><a href="transformação-de-dados-com-dplyr.html#cb129-10" tabindex="-1"></a>                    <span class="at">arr_delay_total =</span> <span class="fu">sum</span>(arr_delay),</span>
<span id="cb129-11"><a href="transformação-de-dados-com-dplyr.html#cb129-11" tabindex="-1"></a>                    <span class="at">flights_total =</span> <span class="fu">sum</span>(flights)</span>
<span id="cb129-12"><a href="transformação-de-dados-com-dplyr.html#cb129-12" tabindex="-1"></a>                ) <span class="sc">%&gt;%</span></span>
<span id="cb129-13"><a href="transformação-de-dados-com-dplyr.html#cb129-13" tabindex="-1"></a>                <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb129-14"><a href="transformação-de-dados-com-dplyr.html#cb129-14" tabindex="-1"></a>                <span class="fu">mutate</span>(        </span>
<span id="cb129-15"><a href="transformação-de-dados-com-dplyr.html#cb129-15" tabindex="-1"></a>                    <span class="at">arr_delay_mean =</span> arr_delay <span class="sc">/</span> flights, <span class="co"># atraso médio da companhia</span></span>
<span id="cb129-16"><a href="transformação-de-dados-com-dplyr.html#cb129-16" tabindex="-1"></a>                    <span class="at">arr_delay_others =</span> (arr_delay_total <span class="sc">-</span> arr_delay) <span class="sc">/</span> (flights_total <span class="sc">-</span> flights), <span class="co"># atraso médio das demais companhias</span></span>
<span id="cb129-17"><a href="transformação-de-dados-com-dplyr.html#cb129-17" tabindex="-1"></a>                    <span class="at">arr_delay_diff =</span> arr_delay_mean <span class="sc">-</span> arr_delay_others <span class="co"># diferença do atraso em relação às demais companhias</span></span>
<span id="cb129-18"><a href="transformação-de-dados-com-dplyr.html#cb129-18" tabindex="-1"></a>                ) <span class="sc">%&gt;%</span></span>
<span id="cb129-19"><a href="transformação-de-dados-com-dplyr.html#cb129-19" tabindex="-1"></a>                <span class="fu">filter</span>(<span class="fu">is.finite</span>(arr_delay_diff)) <span class="sc">%&gt;%</span></span>
<span id="cb129-20"><a href="transformação-de-dados-com-dplyr.html#cb129-20" tabindex="-1"></a>                <span class="fu">group_by</span>(carrier) <span class="sc">%&gt;%</span></span>
<span id="cb129-21"><a href="transformação-de-dados-com-dplyr.html#cb129-21" tabindex="-1"></a>                <span class="fu">summarise</span>(</span>
<span id="cb129-22"><a href="transformação-de-dados-com-dplyr.html#cb129-22" tabindex="-1"></a>                    <span class="at">arr_delay_diff =</span> <span class="fu">mean</span>(arr_delay_diff)</span>
<span id="cb129-23"><a href="transformação-de-dados-com-dplyr.html#cb129-23" tabindex="-1"></a>                ) <span class="sc">%&gt;%</span></span>
<span id="cb129-24"><a href="transformação-de-dados-com-dplyr.html#cb129-24" tabindex="-1"></a>                <span class="fu">arrange</span>(<span class="fu">desc</span>(arr_delay_diff)))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;origin&#39;, &#39;dest&#39;. You can override using
## the `.groups` argument.</code></pre>
<pre><code>## # A tibble: 15 × 2
##    carrier arr_delay_diff
##    &lt;chr&gt;            &lt;dbl&gt;
##  1 OO              27.3  
##  2 F9              17.3  
##  3 EV              11.0  
##  4 B6               6.41 
##  5 FL               2.57 
##  6 VX              -0.202
##  7 AA              -0.970
##  8 WN              -1.27 
##  9 UA              -1.86 
## 10 MQ              -2.48 
## 11 YV              -2.81 
## 12 9E              -3.54 
## 13 US              -4.14 
## 14 DL             -10.2  
## 15 AS             -15.8</code></pre>
<p>Desconsiderando o efeito de trechos e aeroportos ruins, a companhia com maior atraso é a OO (SkyWest Airlines Inc.).</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="transformação-de-dados-com-dplyr.html#cb132-1" tabindex="-1"></a>atrasos <span class="sc">%&gt;%</span></span>
<span id="cb132-2"><a href="transformação-de-dados-com-dplyr.html#cb132-2" tabindex="-1"></a>    <span class="fu">left_join</span>(airlines, <span class="at">by =</span> <span class="st">&quot;carrier&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb132-3"><a href="transformação-de-dados-com-dplyr.html#cb132-3" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb132-4"><a href="transformação-de-dados-com-dplyr.html#cb132-4" tabindex="-1"></a>        arr_delay_diff, </span>
<span id="cb132-5"><a href="transformação-de-dados-com-dplyr.html#cb132-5" tabindex="-1"></a>        <span class="fu">reorder</span>(name, <span class="fu">desc</span>(arr_delay_diff))</span>
<span id="cb132-6"><a href="transformação-de-dados-com-dplyr.html#cb132-6" tabindex="-1"></a>    )) <span class="sc">+</span></span>
<span id="cb132-7"><a href="transformação-de-dados-com-dplyr.html#cb132-7" tabindex="-1"></a>        <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb132-8"><a href="transformação-de-dados-com-dplyr.html#cb132-8" tabindex="-1"></a>        <span class="fu">labs</span>(</span>
<span id="cb132-9"><a href="transformação-de-dados-com-dplyr.html#cb132-9" tabindex="-1"></a>            <span class="at">title =</span> <span class="st">&quot;Atrasos por companhia aérea&quot;</span>,</span>
<span id="cb132-10"><a href="transformação-de-dados-com-dplyr.html#cb132-10" tabindex="-1"></a>            <span class="at">y =</span> <span class="st">&quot;Companhia aérea&quot;</span>,</span>
<span id="cb132-11"><a href="transformação-de-dados-com-dplyr.html#cb132-11" tabindex="-1"></a>            <span class="at">x =</span> <span class="st">&quot;Tempo médio de atraso (em min.)&quot;</span></span>
<span id="cb132-12"><a href="transformação-de-dados-com-dplyr.html#cb132-12" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb132-13"><a href="transformação-de-dados-com-dplyr.html#cb132-13" tabindex="-1"></a>        tema</span></code></pre></div>
<p><img src="r4ds_files/figure-html/unnamed-chunk-70-1.png" width="672" /></p>
</div>
</div>
<div id="exr3-7-6" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.7.6<a href="transformação-de-dados-com-dplyr.html#exr3-7-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Para cada avião, conte o número de voos antes do primeiro atraso de mais de uma hora.</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-64" class="solution"><em>Solução</em>. </span>Utilizando a variável <code>flight</code> para identificar o voo e a variável <code>arr_delay</code> como parâmetro para determinar o tempo de atraso:</p>
<ul>
<li>ordenamos o data-frame conforme a hora agendada para decolagem;</li>
<li>agrupamos pelo número do voo;</li>
<li>utilizamos as funções <code>first()</code> e <code>which()</code> para buscar a posição do primeiro elemento que é <code>NA</code> ou o atraso é maior do que 60 min.</li>
</ul>
<p>Obs.: <code>NA</code> indica que aquele voo não teve nenhum atraso superior a 60 min.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="transformação-de-dados-com-dplyr.html#cb133-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb133-2"><a href="transformação-de-dados-com-dplyr.html#cb133-2" tabindex="-1"></a>    <span class="fu">arrange</span>(time_hour) <span class="sc">%&gt;%</span>    </span>
<span id="cb133-3"><a href="transformação-de-dados-com-dplyr.html#cb133-3" tabindex="-1"></a>    <span class="fu">group_by</span>(flight) <span class="sc">%&gt;%</span></span>
<span id="cb133-4"><a href="transformação-de-dados-com-dplyr.html#cb133-4" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb133-5"><a href="transformação-de-dados-com-dplyr.html#cb133-5" tabindex="-1"></a>        <span class="at">first_delay_pos =</span> <span class="fu">first</span>(<span class="fu">which</span>(<span class="fu">is.na</span>(arr_delay) <span class="sc">|</span> arr_delay <span class="sc">&gt;</span> <span class="dv">60</span>)) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb133-6"><a href="transformação-de-dados-com-dplyr.html#cb133-6" tabindex="-1"></a>    )</span></code></pre></div>
<pre><code>## # A tibble: 3,844 × 2
##    flight first_delay_pos
##     &lt;int&gt;           &lt;dbl&gt;
##  1      1              47
##  2      2              NA
##  3      3               9
##  4      4              77
##  5      5              11
##  6      6              23
##  7      7              17
##  8      8              15
##  9      9              12
## 10     10              24
## # ℹ 3,834 more rows</code></pre>
</div>
</div>
<div id="exr3-7-7" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.7.7<a href="transformação-de-dados-com-dplyr.html#exr3-7-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>O que o argumento <code>sort</code> para <code>count()</code> faz? Quando você pode usá-lo?</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-65" class="solution"><em>Solução</em>. </span>Utilizando o comando <code>?count</code>, identificamos que o argumento <code>sort</code> organiza a contagem em ordem decrescente.</p>
</div>
</div>
</div>
<div id="mudanças-agrupadas-e-filtros" class="section level2 hasAnchor" number="3.8">
<h2><span class="header-section-number">3.8</span> Mudanças agrupadas (e filtros)<a href="transformação-de-dados-com-dplyr.html#mudanças-agrupadas-e-filtros" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="exr3-8-1" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.8.1<a href="transformação-de-dados-com-dplyr.html#exr3-8-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Volte à tabela de funções de mudança e filtragem úteis. Descreva como cada operaçõa muda quando você as combina com o agrupamento.</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-66" class="solution"><em>Solução</em>. </span>x</p>
</div>
</div>
<div id="exr3-8-2" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.8.2<a href="transformação-de-dados-com-dplyr.html#exr3-8-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Qual avião (<code>tailnum</code>) tem o pior registro de pontualidade?</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-67" class="solution"><em>Solução</em>. </span>Vamos inicialmente considerar que um voo é pontual se o tempo de atraso na chegada (<code>arr_delay</code>) é igual ou inferior a zero e, para considerar um avião como mais ou menos pontual, levaremos em consideração a proporção de voos pontuais que ele realizou.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="transformação-de-dados-com-dplyr.html#cb135-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb135-2"><a href="transformação-de-dados-com-dplyr.html#cb135-2" tabindex="-1"></a>    <span class="co"># Considerar apenas os registros que tem a informação sobre o avião, </span></span>
<span id="cb135-3"><a href="transformação-de-dados-com-dplyr.html#cb135-3" tabindex="-1"></a>    <span class="co"># hora de chegada e atraso na chegada</span></span>
<span id="cb135-4"><a href="transformação-de-dados-com-dplyr.html#cb135-4" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(tailnum), <span class="sc">!</span><span class="fu">is.na</span>(arr_time), <span class="sc">!</span><span class="fu">is.na</span>(arr_delay)) <span class="sc">%&gt;%</span></span>
<span id="cb135-5"><a href="transformação-de-dados-com-dplyr.html#cb135-5" tabindex="-1"></a>    <span class="co"># Criar uma variável booleana (0 ou 1) que indica se o voo foi pontual</span></span>
<span id="cb135-6"><a href="transformação-de-dados-com-dplyr.html#cb135-6" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb135-7"><a href="transformação-de-dados-com-dplyr.html#cb135-7" tabindex="-1"></a>        <span class="at">on_time =</span> <span class="sc">!</span><span class="fu">is.na</span>(arr_time) <span class="sc">&amp;</span> arr_delay <span class="sc">&lt;=</span> <span class="dv">0</span></span>
<span id="cb135-8"><a href="transformação-de-dados-com-dplyr.html#cb135-8" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb135-9"><a href="transformação-de-dados-com-dplyr.html#cb135-9" tabindex="-1"></a>    <span class="co"># Calcular a proporção de voos pontuais e o número de voos por avião</span></span>
<span id="cb135-10"><a href="transformação-de-dados-com-dplyr.html#cb135-10" tabindex="-1"></a>    <span class="fu">group_by</span>(tailnum) <span class="sc">%&gt;%</span></span>
<span id="cb135-11"><a href="transformação-de-dados-com-dplyr.html#cb135-11" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb135-12"><a href="transformação-de-dados-com-dplyr.html#cb135-12" tabindex="-1"></a>        <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb135-13"><a href="transformação-de-dados-com-dplyr.html#cb135-13" tabindex="-1"></a>        <span class="at">arr_delay =</span> <span class="fu">mean</span>(arr_delay),</span>
<span id="cb135-14"><a href="transformação-de-dados-com-dplyr.html#cb135-14" tabindex="-1"></a>        <span class="at">on_time =</span> <span class="fu">mean</span>(on_time)</span>
<span id="cb135-15"><a href="transformação-de-dados-com-dplyr.html#cb135-15" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb135-16"><a href="transformação-de-dados-com-dplyr.html#cb135-16" tabindex="-1"></a>    <span class="co"># Descartar aviões que voaram 20 vezes ou menos</span></span>
<span id="cb135-17"><a href="transformação-de-dados-com-dplyr.html#cb135-17" tabindex="-1"></a>    <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb135-18"><a href="transformação-de-dados-com-dplyr.html#cb135-18" tabindex="-1"></a>    <span class="co"># Ordenar por percentiual de voos pontuais</span></span>
<span id="cb135-19"><a href="transformação-de-dados-com-dplyr.html#cb135-19" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(on_time)) <span class="sc">%&gt;%</span></span>
<span id="cb135-20"><a href="transformação-de-dados-com-dplyr.html#cb135-20" tabindex="-1"></a>    <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   tailnum     n arr_delay on_time
##   &lt;chr&gt;   &lt;int&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 N382HA     26    -23.5    0.885
## 2 N553AA     51     -6.33   0.863
## 3 N423AS     29    -22.3    0.862
## 4 N538AA     35     -9.6    0.857
## 5 N548AA     49    -15.5    0.857
## 6 N5EJAA     21    -12.5    0.857</code></pre>
<p>Com base na configuração acima, o avião N382HA é o mais pontual, com 88,46% dos 26 voos sendo executados com pontualidade.</p>
</div>
</div>
<div id="exr3-8-3" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.8.3<a href="transformação-de-dados-com-dplyr.html#exr3-8-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>A que horas você deverá voar se quiser evitar atrasos ao máximo.</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-68" class="solution"><em>Solução</em>. </span>O problema depende de encontrar o horário em que ocorrem menos atrasos. Consideraremos a hora inteira como parâmetro para a busca (<code>hour</code>) e utilizaremos a média dos tempos de atraso dos voos.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="transformação-de-dados-com-dplyr.html#cb137-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb137-2"><a href="transformação-de-dados-com-dplyr.html#cb137-2" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(hour)) <span class="sc">%&gt;%</span></span>
<span id="cb137-3"><a href="transformação-de-dados-com-dplyr.html#cb137-3" tabindex="-1"></a>    <span class="fu">group_by</span>(hour) <span class="sc">%&gt;%</span></span>
<span id="cb137-4"><a href="transformação-de-dados-com-dplyr.html#cb137-4" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb137-5"><a href="transformação-de-dados-com-dplyr.html#cb137-5" tabindex="-1"></a>        <span class="at">arr_delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> T)</span>
<span id="cb137-6"><a href="transformação-de-dados-com-dplyr.html#cb137-6" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb137-7"><a href="transformação-de-dados-com-dplyr.html#cb137-7" tabindex="-1"></a>    <span class="fu">arrange</span>(arr_delay) <span class="sc">%&gt;%</span></span>
<span id="cb137-8"><a href="transformação-de-dados-com-dplyr.html#cb137-8" tabindex="-1"></a>    <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##    hour arr_delay
##   &lt;dbl&gt;     &lt;dbl&gt;
## 1     7    -5.30 
## 2     5    -4.80 
## 3     6    -3.38 
## 4     9    -1.45 
## 5     8    -1.11 
## 6    10     0.954</code></pre>
</div>
</div>
<div id="exr3-8-4" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.8.4<a href="transformação-de-dados-com-dplyr.html#exr3-8-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Para cada destino, calcule os minutos totais de atraso. Para cada voo, calcule a proporção de atraso total par seu destino.</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-69" class="solution"><em>Solução</em>. </span>R.: Para calcular o atraso total (em minutos) por destino, somaremos os valores da variável <code>arr_delay</code> de todos os voos para cada destino (<code>group_by(dest)</code>). Em seguida, para calcular a proporção com a qual cada voo colabora para o atraso total do destino, utilizaremos a razão entre o atraso do voo e o total do grupo ao qual pertence.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="transformação-de-dados-com-dplyr.html#cb139-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb139-2"><a href="transformação-de-dados-com-dplyr.html#cb139-2" tabindex="-1"></a>    <span class="fu">filter</span>(arr_delay <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb139-3"><a href="transformação-de-dados-com-dplyr.html#cb139-3" tabindex="-1"></a>    <span class="fu">group_by</span>(dest) <span class="sc">%&gt;%</span></span>
<span id="cb139-4"><a href="transformação-de-dados-com-dplyr.html#cb139-4" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb139-5"><a href="transformação-de-dados-com-dplyr.html#cb139-5" tabindex="-1"></a>        <span class="at">arr_delay_total =</span> <span class="fu">sum</span>(arr_delay),</span>
<span id="cb139-6"><a href="transformação-de-dados-com-dplyr.html#cb139-6" tabindex="-1"></a>        <span class="at">arr_delay_prop =</span> arr_delay <span class="sc">/</span> arr_delay_total</span>
<span id="cb139-7"><a href="transformação-de-dados-com-dplyr.html#cb139-7" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb139-8"><a href="transformação-de-dados-com-dplyr.html#cb139-8" tabindex="-1"></a>    <span class="fu">select</span> (dest, flight, dep_time, arr_delay, arr_delay_total, arr_delay_prop) <span class="sc">%&gt;%</span></span>
<span id="cb139-9"><a href="transformação-de-dados-com-dplyr.html#cb139-9" tabindex="-1"></a>    <span class="fu">arrange</span>(dest, <span class="fu">desc</span>(arr_delay_prop)) <span class="sc">%&gt;%</span></span>
<span id="cb139-10"><a href="transformação-de-dados-com-dplyr.html#cb139-10" tabindex="-1"></a>    <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
## # Groups:   dest [1]
##   dest  flight dep_time arr_delay arr_delay_total arr_delay_prop
##   &lt;chr&gt;  &lt;int&gt;    &lt;int&gt;     &lt;dbl&gt;           &lt;dbl&gt;          &lt;dbl&gt;
## 1 ABQ     1505     2145       153            4487         0.0341
## 2 ABQ       65     2223       149            4487         0.0332
## 3 ABQ       65     2146       138            4487         0.0308
## 4 ABQ     1505     2206       137            4487         0.0305
## 5 ABQ       65     2220       136            4487         0.0303
## 6 ABQ     1505     2025       126            4487         0.0281</code></pre>
</div>
</div>
<div id="exr3-8-5" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.8.5<a href="transformação-de-dados-com-dplyr.html#exr3-8-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Atrasos são normalmente temporariamente correlacionados: mesmo quando o problema que causou o atraso inicial foi resolvido, , voos posteriores atrasam para permitir que os voos anteriores decolem. Usando <code>lag()</code>, explore como o atraso de um voo está relacionado com o atraso imediatamente anterior.</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-70" class="solution"><em>Solução</em>. </span>Considerando o atraso na decolagem, vamos inicialmente ordenar os voos por aeroporto, data e hora da decolagem. Em seguida, agrupando pelo aeroporto, coletamos o atraso do voo anteriot (note que o <code>mutate</code> irá atuar sobre o grupo apenas. Não faz sentido considerar o voo anterior em outro aeroporto!). Na sequência, podemos agrupar pelo tempo de atraso do voo anterior para calcular a média dos atrasos dos voos. Por fim, é exibido o gráfico.</p>
<p>Avaliando a imagem, podemos notar a tendência de que, quanto maior o atraso do voo imediatamente anterior, maior será o atraso do voo atual. O padrão crescente segue até atrasos de aproximadamente 435 minutos. Depois passa a decrescer, o que deve ser analisado mais aprofundadamente.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="transformação-de-dados-com-dplyr.html#cb141-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb141-2"><a href="transformação-de-dados-com-dplyr.html#cb141-2" tabindex="-1"></a>    <span class="fu">arrange</span>(origin, month, day, dep_time) <span class="sc">%&gt;%</span></span>
<span id="cb141-3"><a href="transformação-de-dados-com-dplyr.html#cb141-3" tabindex="-1"></a>    <span class="fu">group_by</span>(origin) <span class="sc">%&gt;%</span></span>
<span id="cb141-4"><a href="transformação-de-dados-com-dplyr.html#cb141-4" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">prev_dep_delay =</span> <span class="fu">lag</span>(dep_delay)) <span class="sc">%&gt;%</span></span>
<span id="cb141-5"><a href="transformação-de-dados-com-dplyr.html#cb141-5" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_delay), <span class="sc">!</span><span class="fu">is.na</span>(prev_dep_delay)) <span class="sc">%&gt;%</span></span>
<span id="cb141-6"><a href="transformação-de-dados-com-dplyr.html#cb141-6" tabindex="-1"></a>    <span class="fu">group_by</span>(origin, prev_dep_delay) <span class="sc">%&gt;%</span></span>
<span id="cb141-7"><a href="transformação-de-dados-com-dplyr.html#cb141-7" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">dep_delay_mean =</span> <span class="fu">mean</span>(dep_delay)) <span class="sc">%&gt;%</span></span>
<span id="cb141-8"><a href="transformação-de-dados-com-dplyr.html#cb141-8" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(prev_dep_delay, dep_delay_mean)) <span class="sc">+</span></span>
<span id="cb141-9"><a href="transformação-de-dados-com-dplyr.html#cb141-9" tabindex="-1"></a>        <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb141-10"><a href="transformação-de-dados-com-dplyr.html#cb141-10" tabindex="-1"></a>        <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span>        </span>
<span id="cb141-11"><a href="transformação-de-dados-com-dplyr.html#cb141-11" tabindex="-1"></a>        <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1300</span>, <span class="at">by =</span> <span class="dv">60</span>)) <span class="sc">+</span></span>
<span id="cb141-12"><a href="transformação-de-dados-com-dplyr.html#cb141-12" tabindex="-1"></a>        <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">450</span>, <span class="at">by =</span> <span class="dv">60</span>)) <span class="sc">+</span></span>
<span id="cb141-13"><a href="transformação-de-dados-com-dplyr.html#cb141-13" tabindex="-1"></a>        <span class="fu">labs</span>(</span>
<span id="cb141-14"><a href="transformação-de-dados-com-dplyr.html#cb141-14" tabindex="-1"></a>            <span class="at">title =</span> <span class="st">&quot;Atraso médio na decolagem em função do atraso na decolagem anterior.&quot;</span>,</span>
<span id="cb141-15"><a href="transformação-de-dados-com-dplyr.html#cb141-15" tabindex="-1"></a>            <span class="at">x =</span> <span class="st">&quot;Atraso na decolagem anterior (min.)&quot;</span>,</span>
<span id="cb141-16"><a href="transformação-de-dados-com-dplyr.html#cb141-16" tabindex="-1"></a>            <span class="at">y =</span> <span class="st">&quot;Atraso médio na decolagem (min.)&quot;</span></span>
<span id="cb141-17"><a href="transformação-de-dados-com-dplyr.html#cb141-17" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb141-18"><a href="transformação-de-dados-com-dplyr.html#cb141-18" tabindex="-1"></a>        tema</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;origin&#39;. You can override using the
## `.groups` argument.
## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="r4ds_files/figure-html/unnamed-chunk-75-1.png" width="672" /></p>
<p>É importante notar que o padrão se repete se avaliarmos cada aeroporto individualmente.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="transformação-de-dados-com-dplyr.html#cb143-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb143-2"><a href="transformação-de-dados-com-dplyr.html#cb143-2" tabindex="-1"></a>    <span class="fu">arrange</span>(origin, month, day, dep_time) <span class="sc">%&gt;%</span></span>
<span id="cb143-3"><a href="transformação-de-dados-com-dplyr.html#cb143-3" tabindex="-1"></a>    <span class="fu">group_by</span>(origin) <span class="sc">%&gt;%</span></span>
<span id="cb143-4"><a href="transformação-de-dados-com-dplyr.html#cb143-4" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">prev_dep_delay =</span> <span class="fu">lag</span>(dep_delay)) <span class="sc">%&gt;%</span></span>
<span id="cb143-5"><a href="transformação-de-dados-com-dplyr.html#cb143-5" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_delay), <span class="sc">!</span><span class="fu">is.na</span>(prev_dep_delay)) <span class="sc">%&gt;%</span></span>
<span id="cb143-6"><a href="transformação-de-dados-com-dplyr.html#cb143-6" tabindex="-1"></a>    <span class="fu">group_by</span>(origin, prev_dep_delay) <span class="sc">%&gt;%</span></span>
<span id="cb143-7"><a href="transformação-de-dados-com-dplyr.html#cb143-7" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">dep_delay_mean =</span> <span class="fu">mean</span>(dep_delay)) <span class="sc">%&gt;%</span></span>
<span id="cb143-8"><a href="transformação-de-dados-com-dplyr.html#cb143-8" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(prev_dep_delay, dep_delay_mean)) <span class="sc">+</span></span>
<span id="cb143-9"><a href="transformação-de-dados-com-dplyr.html#cb143-9" tabindex="-1"></a>        <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb143-10"><a href="transformação-de-dados-com-dplyr.html#cb143-10" tabindex="-1"></a>        <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb143-11"><a href="transformação-de-dados-com-dplyr.html#cb143-11" tabindex="-1"></a>        <span class="fu">facet_wrap</span>(<span class="sc">~</span> origin, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb143-12"><a href="transformação-de-dados-com-dplyr.html#cb143-12" tabindex="-1"></a>        <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1300</span>, <span class="at">by =</span> <span class="dv">60</span>)) <span class="sc">+</span></span>
<span id="cb143-13"><a href="transformação-de-dados-com-dplyr.html#cb143-13" tabindex="-1"></a>        <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">450</span>, <span class="at">by =</span> <span class="dv">60</span>)) <span class="sc">+</span></span>
<span id="cb143-14"><a href="transformação-de-dados-com-dplyr.html#cb143-14" tabindex="-1"></a>        <span class="fu">labs</span>(</span>
<span id="cb143-15"><a href="transformação-de-dados-com-dplyr.html#cb143-15" tabindex="-1"></a>            <span class="at">title =</span> <span class="st">&quot;Atraso médio na decolagem em função do atraso na decolagem anterior.&quot;</span>,</span>
<span id="cb143-16"><a href="transformação-de-dados-com-dplyr.html#cb143-16" tabindex="-1"></a>            <span class="at">x =</span> <span class="st">&quot;Atraso na decolagem anterior (min.)&quot;</span>,</span>
<span id="cb143-17"><a href="transformação-de-dados-com-dplyr.html#cb143-17" tabindex="-1"></a>            <span class="at">y =</span> <span class="st">&quot;Atraso médio na decolagem (min.)&quot;</span></span>
<span id="cb143-18"><a href="transformação-de-dados-com-dplyr.html#cb143-18" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb143-19"><a href="transformação-de-dados-com-dplyr.html#cb143-19" tabindex="-1"></a>        tema</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;origin&#39;. You can override using the
## `.groups` argument.
## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<p><img src="r4ds_files/figure-html/unnamed-chunk-76-1.png" width="672" /></p>
</div>
</div>
<div id="exr3-8-6" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.8.6<a href="transformação-de-dados-com-dplyr.html#exr3-8-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Veja cada destino. Você consegue encontrar os voos que são suspeitamente rápidos? (Ou seja, voos que representam um erro de entrada de dados em potencial). Calcule o tempo de viagem de um voo relativo ao voo mais curto para aquele destino. Quais voos ficaram mais atrasados no ar?</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-71" class="solution"><em>Solução</em>. </span>Inicialmente calcularemos a média e o desvio padrão para cada rota (<code>origin</code>, <code>dest</code>) e, na sequência, calcularemos o <em>z-score</em> para avaliar a distribuição dos tempos de voo. Usaremos a mediana e o intervalo interquartílico para escapar do efeito de outliers.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="transformação-de-dados-com-dplyr.html#cb145-1" tabindex="-1"></a>standardized <span class="ot">&lt;-</span> flights <span class="sc">%&gt;%</span></span>
<span id="cb145-2"><a href="transformação-de-dados-com-dplyr.html#cb145-2" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(air_time)) <span class="sc">%&gt;%</span>            <span class="co"># Remover os voos sem informação do tempo de voo</span></span>
<span id="cb145-3"><a href="transformação-de-dados-com-dplyr.html#cb145-3" tabindex="-1"></a>    <span class="fu">group_by</span>(origin, dest) <span class="sc">%&gt;%</span>              <span class="co"># Agrupar pela rota (origin -&gt; dest)</span></span>
<span id="cb145-4"><a href="transformação-de-dados-com-dplyr.html#cb145-4" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb145-5"><a href="transformação-de-dados-com-dplyr.html#cb145-5" tabindex="-1"></a>        <span class="at">median =</span> <span class="fu">median</span>(air_time),          <span class="co"># Calcular a média de cada grupo</span></span>
<span id="cb145-6"><a href="transformação-de-dados-com-dplyr.html#cb145-6" tabindex="-1"></a>        <span class="at">iqr =</span> <span class="fu">IQR</span>(air_time),                <span class="co"># Calcular o desvio padrão do grupo</span></span>
<span id="cb145-7"><a href="transformação-de-dados-com-dplyr.html#cb145-7" tabindex="-1"></a>        <span class="at">n =</span> <span class="fu">n</span>(),                            <span class="co"># Calcular o tamanho do grupo</span></span>
<span id="cb145-8"><a href="transformação-de-dados-com-dplyr.html#cb145-8" tabindex="-1"></a>        <span class="at">z =</span> (air_time <span class="sc">-</span> median) <span class="sc">/</span> iqr       <span class="co"># Calcular o z-score de cada voo dentro do grupo</span></span>
<span id="cb145-9"><a href="transformação-de-dados-com-dplyr.html#cb145-9" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb145-10"><a href="transformação-de-dados-com-dplyr.html#cb145-10" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb145-11"><a href="transformação-de-dados-com-dplyr.html#cb145-11" tabindex="-1"></a></span>
<span id="cb145-12"><a href="transformação-de-dados-com-dplyr.html#cb145-12" tabindex="-1"></a>standardized <span class="sc">%&gt;%</span>    </span>
<span id="cb145-13"><a href="transformação-de-dados-com-dplyr.html#cb145-13" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> z)) <span class="sc">+</span></span>
<span id="cb145-14"><a href="transformação-de-dados-com-dplyr.html#cb145-14" tabindex="-1"></a>        <span class="fu">geom_density</span>() <span class="sc">+</span></span>
<span id="cb145-15"><a href="transformação-de-dados-com-dplyr.html#cb145-15" tabindex="-1"></a>        <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="sc">-</span><span class="fl">2.5</span>), <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb145-16"><a href="transformação-de-dados-com-dplyr.html#cb145-16" tabindex="-1"></a>        <span class="fu">geom_vline</span>(<span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fl">2.5</span>), <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb145-17"><a href="transformação-de-dados-com-dplyr.html#cb145-17" tabindex="-1"></a>        <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">10</span>, <span class="dv">30</span>, <span class="at">by =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb145-18"><a href="transformação-de-dados-com-dplyr.html#cb145-18" tabindex="-1"></a>        tema</span></code></pre></div>
<pre><code>## Warning: Removed 4 rows containing non-finite values (`stat_density()`).</code></pre>
<p><img src="r4ds_files/figure-html/unnamed-chunk-77-1.png" width="672" /></p>
<p>Os voos com <em>z-score</em> muito baixo, são aqueles cujo tempo de voo foi muito menor do que a média, ou seja, os mais rápidos.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="transformação-de-dados-com-dplyr.html#cb147-1" tabindex="-1"></a>standardized <span class="sc">%&gt;%</span></span>
<span id="cb147-2"><a href="transformação-de-dados-com-dplyr.html#cb147-2" tabindex="-1"></a>    <span class="fu">arrange</span>(z) <span class="sc">%&gt;%</span></span>
<span id="cb147-3"><a href="transformação-de-dados-com-dplyr.html#cb147-3" tabindex="-1"></a>    <span class="fu">select</span>(carrier, flight, origin, dest, month, day, air_time, median, iqr, z) <span class="sc">%&gt;%</span></span>
<span id="cb147-4"><a href="transformação-de-dados-com-dplyr.html#cb147-4" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 10
##    carrier flight origin dest  month   day air_time median   iqr     z
##    &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 EV        4667 EWR    MSP       7     2       93    149    16 -3.5 
##  2 DL        1499 LGA    ATL       5    25       65    112    14 -3.36
##  3 US        2132 LGA    BOS       3     2       21     37     5 -3.2 
##  4 B6          30 JFK    ROC       3    25       35     51     5 -3.2 
##  5 B6        2002 JFK    BUF      11    10       38     57     6 -3.17
##  6 EV        4292 EWR    GSP       5    13       55     92    12 -3.08
##  7 EV        4249 EWR    SYR       3    15       30     39     3 -3   
##  8 EV        4580 EWR    BTV       6    29       34     46     4 -3   
##  9 EV        3830 EWR    RIC       7     2       35     53     6 -3   
## 10 EV        4687 EWR    CVG       9    29       62     95    11 -3</code></pre>
<p>Adicionalmente, vamos considerar também a velocidade do voo (<code>mph &lt;- distance / (air_time / 60)</code>).</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="transformação-de-dados-com-dplyr.html#cb149-1" tabindex="-1"></a>standardized <span class="sc">%&gt;%</span></span>
<span id="cb149-2"><a href="transformação-de-dados-com-dplyr.html#cb149-2" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb149-3"><a href="transformação-de-dados-com-dplyr.html#cb149-3" tabindex="-1"></a>        <span class="at">mph =</span> distance <span class="sc">/</span> (air_time <span class="sc">/</span> <span class="dv">60</span>)</span>
<span id="cb149-4"><a href="transformação-de-dados-com-dplyr.html#cb149-4" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb149-5"><a href="transformação-de-dados-com-dplyr.html#cb149-5" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mph)) <span class="sc">+</span></span>
<span id="cb149-6"><a href="transformação-de-dados-com-dplyr.html#cb149-6" tabindex="-1"></a>        <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb149-7"><a href="transformação-de-dados-com-dplyr.html#cb149-7" tabindex="-1"></a>        <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">700</span>, <span class="at">by =</span> <span class="dv">50</span>)) <span class="sc">+</span></span>
<span id="cb149-8"><a href="transformação-de-dados-com-dplyr.html#cb149-8" tabindex="-1"></a>        tema</span></code></pre></div>
<p><img src="r4ds_files/figure-html/unnamed-chunk-79-1.png" width="672" /></p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="transformação-de-dados-com-dplyr.html#cb150-1" tabindex="-1"></a>standardized <span class="sc">%&gt;%</span></span>
<span id="cb150-2"><a href="transformação-de-dados-com-dplyr.html#cb150-2" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb150-3"><a href="transformação-de-dados-com-dplyr.html#cb150-3" tabindex="-1"></a>        <span class="at">mph =</span> distance <span class="sc">/</span> (air_time <span class="sc">/</span> <span class="dv">60</span>)</span>
<span id="cb150-4"><a href="transformação-de-dados-com-dplyr.html#cb150-4" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb150-5"><a href="transformação-de-dados-com-dplyr.html#cb150-5" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(mph)) <span class="sc">%&gt;%</span></span>
<span id="cb150-6"><a href="transformação-de-dados-com-dplyr.html#cb150-6" tabindex="-1"></a>    <span class="fu">select</span>(carrier, flight, origin, dest, month, day, mph) <span class="sc">%&gt;%</span></span>
<span id="cb150-7"><a href="transformação-de-dados-com-dplyr.html#cb150-7" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 7
##    carrier flight origin dest  month   day   mph
##    &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1 DL        1499 LGA    ATL       5    25  703.
##  2 EV        4667 EWR    MSP       7     2  650.
##  3 EV        4292 EWR    GSP       5    13  648 
##  4 EV        3805 EWR    BNA       3    23  641.
##  5 DL        1902 LGA    PBI       1    12  591.
##  6 DL         315 JFK    SJU      11    17  564 
##  7 B6         707 JFK    SJU       2    21  557.
##  8 AA         936 JFK    STT      11    17  556.
##  9 DL         347 JFK    SJU      11    16  554.
## 10 B6        1503 JFK    SJU      11    16  554.</code></pre>
<p>Algum conhecimento prévio nos indica que a a velocidade superior a 550 milhas por hora são suspeitamente altas.</p>
<p>Note que, em ambas as análises, coicidiram quase todos os voos. Poderíamos fazer análises mais acuradas, se tivéssemos mais conhecimento sobre o domínio de negócio, contudo já podemos concluir que aqueles são os voos suspeitos.</p>
</div>
</div>
<div id="exr3-8-7" class="section level3 unnumbered hasAnchor">
<h3>Exercício 3.8.7<a href="transformação-de-dados-com-dplyr.html#exr3-8-7" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="enunciado">
<p>Encontre todos os destinos que são feitos por pelo menos duas companhias. Use essa informação para classificar as companhias.</p>
</div>
<div class="solution">
<p><span id="unlabeled-div-72" class="solution"><em>Solução</em>. </span></p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="transformação-de-dados-com-dplyr.html#cb152-1" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb152-2"><a href="transformação-de-dados-com-dplyr.html#cb152-2" tabindex="-1"></a>    <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(arr_delay)) <span class="sc">%&gt;%</span>                           <span class="co"># Remover os elementos que não tem informação de atraso</span></span>
<span id="cb152-3"><a href="transformação-de-dados-com-dplyr.html#cb152-3" tabindex="-1"></a>    <span class="fu">group_by</span>(origin, dest) <span class="sc">%&gt;%</span>                              <span class="co"># Agrupar pela origem e destino</span></span>
<span id="cb152-4"><a href="transformação-de-dados-com-dplyr.html#cb152-4" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb152-5"><a href="transformação-de-dados-com-dplyr.html#cb152-5" tabindex="-1"></a>        <span class="at">carrier_count =</span> <span class="fu">n_distinct</span>(carrier),                <span class="co"># Calcular quantas empresas fazem o trecho</span></span>
<span id="cb152-6"><a href="transformação-de-dados-com-dplyr.html#cb152-6" tabindex="-1"></a>        <span class="at">arr_delay_mean =</span> <span class="fu">mean</span>(arr_delay),                   <span class="co"># Calcular o atraso médio do trecho</span></span>
<span id="cb152-7"><a href="transformação-de-dados-com-dplyr.html#cb152-7" tabindex="-1"></a>        <span class="at">arr_delay_percent =</span> arr_delay <span class="sc">/</span> arr_delay_mean      <span class="co"># Calcular a proporção do atraso em relação à média do trecho</span></span>
<span id="cb152-8"><a href="transformação-de-dados-com-dplyr.html#cb152-8" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb152-9"><a href="transformação-de-dados-com-dplyr.html#cb152-9" tabindex="-1"></a>    <span class="fu">filter</span>(carrier_count <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span>                           <span class="co"># Considerar apenas trechos operados por mais de uma empresa    </span></span>
<span id="cb152-10"><a href="transformação-de-dados-com-dplyr.html#cb152-10" tabindex="-1"></a>    <span class="fu">group_by</span>(origin, dest, carrier) <span class="sc">%&gt;%</span></span>
<span id="cb152-11"><a href="transformação-de-dados-com-dplyr.html#cb152-11" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb152-12"><a href="transformação-de-dados-com-dplyr.html#cb152-12" tabindex="-1"></a>        <span class="at">arr_delay =</span> <span class="fu">mean</span>(arr_delay_percent)</span>
<span id="cb152-13"><a href="transformação-de-dados-com-dplyr.html#cb152-13" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb152-14"><a href="transformação-de-dados-com-dplyr.html#cb152-14" tabindex="-1"></a>    <span class="fu">arrange</span>(origin, dest, <span class="fu">desc</span>(arr_delay)) <span class="sc">%&gt;%</span></span>
<span id="cb152-15"><a href="transformação-de-dados-com-dplyr.html#cb152-15" tabindex="-1"></a>    <span class="fu">head</span>(<span class="dv">25</span>)</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;origin&#39;, &#39;dest&#39;. You can override using
## the `.groups` argument.</code></pre>
<pre><code>## # A tibble: 25 × 4
## # Groups:   origin, dest [11]
##    origin dest  carrier arr_delay
##    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;
##  1 EWR    ATL   EV          1.48 
##  2 EWR    ATL   UA          0.793
##  3 EWR    ATL   DL          0.755
##  4 EWR    ATL   9E         -0.472
##  5 EWR    AUS   WN         23.7  
##  6 EWR    AUS   UA         -9.02 
##  7 EWR    BDL   UA          3.20 
##  8 EWR    BDL   EV          0.962
##  9 EWR    BNA   EV          1.39 
## 10 EWR    BNA   WN         -0.168
## # ℹ 15 more rows</code></pre>
</div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="fluxo-de-trabalho-o-básico.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="fluxo-de-trabalho-scripts.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": true,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["r4ds.pdf", "r4ds.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
},
"info": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
